(this["webpackJsonpblog-app"]=this["webpackJsonpblog-app"]||[]).push([[0],{127:function(e,t,a){e.exports=a(239)},135:function(e,t){},137:function(e,t){},174:function(e,t){},175:function(e,t){},233:function(e,t,a){},239:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(48),i=a.n(o),l=a(13),s=a(26),u=a(8),c=a(28),d=a(125),m=a(67),p=a.n(m),h=a(33),f=[{id:"U1",login:"nils",name:"Nils Hartmann"},{id:"U2",login:"susi",name:"Susi Mueller"},{id:"U3",login:"klaus",name:"Klaus Schneider"},{id:"U4",login:"sue",name:"Sue Taylor"},{id:"U5",login:"lauren",name:"Lauren Jones"},{id:"U6",login:"olivia",name:"Olivia Smith"},{id:"U7",login:"cathy",name:"Cathy Brown"},{id:"U8",login:"maja",name:"Maja Walsh"}];var g={posts:new Map([["P1",{id:"P1",body:"Lorem ipsum dolor amet microdosing man braid lyft pok pok dreamcatcher hammock tattooed listicle everyday carry banh mi +1 art party. PBR&B keffiyeh freegan irony, +1 unicorn messenger bag quinoa chartreuse banh mi. 8-bit lo-fi hammock, plaid hexagon letterpress paleo sriracha meggings marfa succulents farm-to-table pour-over skateboard. Iceland pabst crucifix, paleo health goth neutra pork belly vaporware keffiyeh tumblr semiotics williamsburg hammock. Pork belly master cleanse pour-over, adaptogen chambray subway tile kitsch shabby chic.\\nActually try-hard craft beer direct trade. Copper mug helvetica try-hard synth microdosing selvage before they sold out, tilde bicycle rights. Squid craft beer polaroid tbh truffaut gochujang. Lo-fi meditation crucifix, bicycle rights squid health goth marfa flannel af photo booth four dollar toast master cleanse lyft four loko man braid.\\nCliche glossier vexillologist, williamsburg venmo butcher lumbersexual ramps. Cloud bread cardigan dreamcatcher, cold-pressed edison bulb mixtape irony chicharrones. Selvage poke man braid, hot chicken hexagon adaptogen cloud bread wolf twee. Roof party occupy shaman la croix bespoke, brooklyn keffiyeh affogato live-edge fanny pack jianbing authentic tattooed church-key. Adaptogen meditation kinfolk la croix readymade gentrify vape yr cray mumblecore hot chicken vexillologist deep v health goth migas. Tumeric pour-over gentrify, thundercats tousled 90's keffiyeh live-edge VHS waistcoat cold-pressed. Put a bird on it adaptogen pinterest slow-carb unicorn hammock scenester four loko kale chips.\\nWayfarers tousled blue bottle man bun cliche chicharrones edison bulb fingerstache live-edge iceland echo park shaman hella woke. Gochujang mumblecore kale chips taxidermy, synth lomo drinking vinegar artisan lyft coloring book thundercats air plant mustache. Beard keytar tumeric truffaut, kombucha try-hard copper mug la croix. Pabst lumbersexual letterpress disrupt. 8-bit live-edge typewriter biodiesel. Salvia mlkshk pabst banh mi, venmo selfies before they sold out try-hard put a bird on it meggings knausgaard PBR&B flexitarian tote bag lyft.\\nDirect trade food truck synth put a bird on it 90's, meh glossier hammock shaman cronut paleo gochujang jean shorts. Fashion axe master cleanse schlitz kogi quinoa thundercats occupy. Chia chillwave disrupt mustache meh. Synth messenger bag biodiesel photo booth irony kale chips. Celiac iceland hammock crucifix waistcoat narwhal tacos ethical cardigan man bun chambray pour-over. Intelligentsia normcore gochujang man bun forage pitchfork. Salvia VHS knausgaard hoodie.\\nOh. You need a little dummy text for your mockup? How quaint.\\nI bet you\u2019re still using Bootstrap too\u2026",likedBy:[],title:"Routing Solutions for React",likes:27,date:"2020-01-03T11:07:04.529Z",userId:"U1",published:!0}],["P2",{id:"P2",body:"Zombie ipsum reversus ab viral inferno, nam rick grimes malum cerebro. De carne lumbering animata corpora quaeritis.\\nCum horribilem walking dead resurgere de crazed sepulcris creaturis, zombie sicut de grave feeding iride et serpens. Pestilentia, shaun ofthe dead scythe animated corpses ipsa screams. Pestilentia est plague haec decaying ambulabat mortuos.\\nSicut zeder apathetic malus voodoo. Aenean a dolor plan et terror soulless vulnerum contagium accedunt, mortui iam vivam unlife. Qui tardius moveri, brid eof reanimator sed in magna copia sint terribiles undeath legionis. Alii missing oculis aliorum sicut serpere crabs nostram. Putridi braindead odores kill and infect, aere implent left four dead.\\nLucio fulci tremor est dark vivos magna. Expansis creepy arm yof darkness ulnis witchcraft missing carnem armis Kirkman Moore and Adlard caeruleum in locis. Romero morbo Congress amarus in auras. Nihil horum sagittis tincidunt, zombie slack-jawed gelida survival portenta.",likedBy:[],title:"My Story on JavaScript",likes:22,date:"2020-01-04T17:12:03.529Z",userId:"U2",published:!0}],["P3",{id:"P3",body:"In sed pariatur incididunt salami pancetta landjaeger dolore meatloaf rump anim aute kevin. Turducken aliquip shoulder labore, enim pig dolore. Shoulder ut proident pig pork loin. Sirloin turkey in meatloaf pork chop, sunt strip steak qui.\\nEu ipsum officia ad leberkas sint. Labore spare ribs venison pork belly aute, culpa pork loin ground round nostrud ea qui sirloin prosciutto jowl elit. Ut jowl in cupim beef ribs turducken pig. Swine hamburger porchetta kielbasa commodo ham et sint pork belly rump dolore turducken in consequat fugiat.\\nTail sed cillum, esse non elit pork belly pork loin eiusmod. Ut boudin rump, kielbasa aliqua alcatra kevin. Sausage excepteur ut occaecat labore. Drumstick cillum nostrud pork belly. Ground round ullamco pork chuck. Eu nulla pork chop aute andouille kevin duis ut kielbasa.Does your lorem ipsum text long for something a little meatier? Give our generator a try\u2026 it\u2019s tasty!",likedBy:[],title:"Handling complex state",likes:22,date:"2019-11-30T06:18:22.529Z",userId:"U7"}],["P4",{id:"P4",body:"Biscuit marzipan tart topping pie apple pie I love. Marzipan I love biscuit bear claw I love liquorice. Chocolate cake souffl\xe9 pastry oat cake jelly-o lemon drops ice cream lemon drops candy.\\nToffee sweet roll jelly beans I love chocolate sweet tart apple pie icing. Icing powder topping cake. Cupcake souffl\xe9 chocolate cake marshmallow muffin dessert sugar plum halvah cake.\\nDanish sweet roll chocolate bar pie cheesecake. Bear claw halvah powder candy chocolate cake chocolate bar sugar plum tootsie roll I love. Chocolate tiramisu candy canes cheesecake.",likedBy:[],title:"Do's and don'ts with React",likes:26,date:"2020-01-07T04:15:03.529Z",userId:"U3",published:!0}],["P5",{id:"P5",body:"Gumbo beet greens corn soko endive gumbo gourd. Parsley shallot courgette tatsoi pea sprouts fava bean collard greens dandelion okra wakame tomato. Dandelion cucumber earthnut pea peanut soko zucchini.\\nTurnip greens yarrow ricebean rutabaga endive cauliflower sea lettuce kohlrabi amaranth water spinach avocado daikon napa cabbage asparagus winter purslane kale. Celery potato scallion desert raisin horseradish spinach carrot soko. Lotus root water spinach fennel kombu maize bamboo shoot green bean swiss chard seakale pumpkin onion chickpea gram corn pea. Brussels sprout coriander water chestnut gourd swiss chard wakame kohlrabi beetroot carrot watercress. Corn amaranth salsify bunya nuts nori azuki bean chickweed potato bell pepper artichoke.\\nNori grape silver beet broccoli kombu beet greens fava bean potato quandong celery. Bunya nuts black-eyed pea prairie turnip leek lentil turnip greens parsnip. Sea lettuce lettuce water chestnut eggplant winter purslane fennel azuki bean earthnut pea sierra leone bologi leek soko chicory celtuce parsley j\xedcama salsify.\\nCelery quandong swiss chard chicory earthnut pea potato. Salsify taro catsear garlic gram celery bitterleaf wattle seed collard greens nori. Grape wattle seed kombu beetroot horseradish carrot squash brussels sprout chard.",likedBy:[],title:"Something to remember when learning new tech",likes:44,date:"2019-12-09T17:13:04.529Z",userId:"U4",published:!0}],["P6",{id:"P6",body:"Normally, both your asses would be dead as fucking fried chicken, but you happen to pull this shit while I'm in a transitional period so I don't wanna kill you, I wanna help you. But I can't give you this case, it don't belong to me. Besides, I've already been through too much shit this morning over this case to hand it over to your dumb ass.\\nMy money's in that office, right? If she start giving me some bullshit about it ain't there, and we got to go someplace else and get it, I'm gonna shoot you in the head then and there. Then I'm gonna shoot that bitch in the kneecaps, find out where my goddamn money is. She gonna tell me too. Hey, look at me when I'm talking to you, motherfucker. You listen: we go in there, and that nigga Winston or anybody else is in there, you the first motherfucker to get shot. You understand?\\nNow that we know who you are, I know who I am. I'm not a mistake! It all makes sense! In a comic, you know how you can tell who the arch-villain's going to be? He's the exact opposite of the hero. And most times they're friends, like you and me! I should've known way back when... You know why, David? Because of the kids. They called me Mr Glass.",likedBy:[],title:"Styling your Components",likes:23,date:"2019-12-11T08:43:04.529Z",userId:"U5",published:!0}],["P7",{id:"P7",body:"Pommy ipsum air one's dirty linen fork out plum pudding the lakes, naff gallivanting around ridicule knows bugger all about nowt. Jolly full English breakast proper alright geezer chaps at the boozer, football bog roll ended up brown bread. Proper knackered collywobbles Geordie I'm off to Bedfordshire wellies, knee high to a grasshopper i'll be a monkey's uncle a tad curtain twitching grub's up jolly hockey sticks, a cracking slappers and meat and two veg.\\nNaff off ridiculous golly gosh Bob's your uncle darling it's spitting, ear hole bowler hat getting on my wick plum pudding supper black pudding, get away with ya completely starkers a comely wench fork out.",likedBy:[],title:"Keep calm and learn GraphQL!",likes:28,date:"2020-01-10T15:03:04.529Z",userId:"U5"}],["P8",{id:"P8",body:"Tweeting a baseball.Sit on human they not getting up ever make it to the carpet before i vomit mmmmmm for cats are cute dismember a mouse and then regurgitate parts of it on the family room floor, for rub face on owner yet kitten is playing with dead mouse. Mark territory.\\nIf human is on laptop sit on the keyboard. Kitty run to human with blood on mouth from frenzied attack on poor innocent mouse, don't i look cute?\\nHide head under blanket so no one can see loved it, hated it, loved it, hated it but curl up and sleep on the freshly laundered towels. Lounge in doorway see owner, run in terror so making sure that fluff gets into the owner's eyes.\\nAnd sometimes switches in french and say \"miaou\" just because well why not i want to go outside let me go outside nevermind inside is better yet jump around on couch, meow constantly until given food, . Love you, then bite you nyan fluffness ahh cucumber!. Purr while eating. Make meme, make cute face spend six hours per day washing, but still have a crusty butthole i am the best yet sitting in a box get suspicious of own shadow then go play with toilette paper check cat door for ambush 10 times before coming in.\\nRub butt on table. Lick butt.",likedBy:[],title:"Increasing React developer experience",likes:37,date:"2020-04-17T12:07:04.529Z",userId:"U1",published:!0}],["P9",{id:"P9",body:"Duis autem vel eum iriure dolor in hendrerit in vulputate velit esse molestie consequat, vel illum dolore eu feugiat nulla facilisis at vero eros et accumsan et iusto odio dignissim qui blandit praesent luptatum zzril delenit augue duis dolore te feugait nulla facilisi. Lorem ipsum dolor sit amet, consectetuer adipiscing elit, sed diam nonummy nibh euismod tincidunt ut laoreet dolore magna aliquam erat volutpat.\\nUt wisi enim ad minim veniam, quis nostrud exerci tation ullamcorper suscipit lobortis nisl ut aliquip ex ea commodo consequat. Duis autem vel eum iriure dolor in hendrerit in vulputate velit esse molestie consequat, vel illum dolore eu feugiat nulla facilisis at vero eros et accumsan et iusto odio dignissim qui blandit praesent luptatum zzril delenit augue duis dolore te feugait nulla facilisi.\\nNam liber tempor cum soluta nobis eleifend option congue nihil imperdiet doming id quod mazim placerat facer possim assum. Lorem ipsum dolor sit amet, consectetuer adipiscing elit, sed diam nonummy nibh euismod tincidunt ut laoreet dolore magna aliquam erat volutpat. Ut wisi enim ad minim veniam, quis nostrud exerci tation ullamcorper suscipit lobortis nisl ut aliquip ex ea commodo consequat.",likedBy:[],title:"Using Redux with care",likes:21,date:"2020-04-02T12:07:04.529Z",userId:"U2",published:!0}],["P10",{id:"P10",body:"Jemand musste Josef K. verleumdet haben, denn ohne dass er etwas B\xf6ses getan h\xe4tte, wurde er eines Morgens verhaftet. \xbbWie ein Hund!\\nAls Gregor Samsa eines Morgens aus unruhigen Tr\xe4umen erwachte, fand er sich in seinem Bett zu einem ungeheueren Ungeziefer verwandelt.\\nUnd es war ihnen wie eine Best\xe4tigung ihrer neuen Tr\xe4ume und guten Absichten, als am Ziele ihrer Fahrt die Tochter als erste sich erhob und ihren jungen K\xf6rper dehnte.\\n\xbbEs ist ein eigent\xfcmlicher Apparat\xab, sagte der Offizier zu dem Forschungsreisenden und \xfcberblickte mit einem gewisserma\xdfen bewundernden Blick den ihm doch wohlbekannten Apparat.",likedBy:[],title:"Understanding State",likes:19,date:"2020-04-18T17:05:04.529Z",userId:"U2",published:!0}]]),users:f},b=g.users,y=g.posts,v=function(e,t){return new Date(t.date)-new Date(e.date)},k=function(e,t){return new Date(e.date)-new Date(t.date)};function E(e){return y.get(e)}function w(e){return b.find((function(t){return t.id===e}))}var S=function(){return 225*(Math.floor(4*Math.random())+2)};function I(e){var t=e.headers.get("authorization");if(t){var a=p.a.verify(t,"hurzelpurzel"),n=w(a.userId);return n?{userId:n.id}:{error:"User with id '".concat(a.userId,"' not found")}}return null}var O=[c.c.post("/api/login",(function(e,t,a){var n=e.body;if(!n)return t(a.status(400),a.json({error:"login (payload) must be defined"}));if(!n.login)return t(a.status(400),a.json({error:"login.login must be defined"}));if(!n.password)return t(a.status(400),a.json({error:"login.password must be defined"}));var r,o=function(e){return b.find((function(t){return t.login===e}))}(n.login);return o?t(a.status(200),a.json({token:(r=o.id,p.a.sign({userId:r},"hurzelpurzel",{expiresIn:"10 years"})),user:o})):t(a.status(403),a.json({error:"Invalid user"}))})),c.c.get("/api/posts",(function(e,t,a){var n=I(e);if(null===n||void 0===n?void 0:n.error)return t(a.status(401),a.json(n));var r=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v,t=arguments.length>1?arguments[1]:void 0,a=Object(h.a)(y.values()).filter((function(e){return e.published||e.userId===t}));return a.sort(e),a}(void 0,null===n||void 0===n?void 0:n.userId).map((function(e){return Object(u.a)({},e,{body:void 0})})),o=e.url.searchParams.get("orderBy"),i=e.url.searchParams.get("direction");return"newestFirst"===o?r.sort(v):"oldestFirst"===o?r.sort(k):"date"===o?"desc"===i?r.sort(v):r.sort(k):"likes"===o?"desc"===i?r.sort((function(e,t){return e.likes-t.likes})):r.sort((function(e,t){return t.likes-e.likes})):"author"===o&&r.sort((function(e,t){if(!e.author||!t.author)return v(e,t);var a=e.author.localeCompare(t.author);return 0===a?v(e,t):a})),t(a.delay(S()),a.json(r))})),c.c.get("/api/posts/:id",(function(e,t,a){var n=E(e.params.id);if(!n)return t(a.status(404),a.json({error:"Post '".concat(e.params.id,"' not found")}));var r=w(n.userId);return r?t(a.delay(S()),a.json(Object(u.a)({},n,{user:r}))):t(a.status(404),a.json({error:"Iser '".concat(n.userId,"' not found")}))})),c.c.post("/api/posts",(function(e,t,a){var n=I(e);if(!n)return t(a.status(401),a.json({error:"You must be logged in to execute this action"}));if(null===n||void 0===n?void 0:n.error)return t(a.status(401),a.json(n));var r=e.body;if(!r)return t(a.status(400),a.json({error:"Post must be defined"}));if(!r.title)return t(a.status(400),a.json({error:"post.title must be defined and not empty"}));if(!r.body)return t(a.status(400),a.json({error:"post.body must be defined and not empty"}));var o=function(e,t){var a={userId:e,title:t.title,body:t.body,likes:0,likedBy:[],date:(new Date).toISOString(),id:"P".concat(y.size+1)};return y.set(a.id,a),a}(n.userId,r);return t(a.status(201),a.json(o))})),c.c.post("/api/posts/:id/like",(function(e,t,a){var n=E(e.params.id);if(!n)return t(a.status(404),a.json({error:"Post '".concat(e.params.id,"' not found")}));if("P9"===n.id)return t(a.status(200),a.json({postId:n.id,likedBy:n.likedBy,likes:n.likes}));var r=I(e);if(null===r||void 0===r?void 0:r.error)return t(a.status(401),a.json(r));var o=function(e,t){var a=y.get(e);if(!a)throw new Error("Cannot find BlogPost '".concat(e,"'"));var n=a.likedBy.filter((function(e){return e!==t})),r=a.likes;t?n.length===a.likedBy.length?(n.push(t),r++):r--:r++;var o=Object(u.a)({},a,{likes:r,likedBy:n});return y.set(e,o),o}(n.id,null===r||void 0===r?void 0:r.userId);return t(a.status(200),a.json({postId:o.id,likedBy:o.likedBy,likes:o.likes}))}))];d.a.apply(void 0,O).start();a(233);var P=a(10);function j(){return r.a.createElement("div",{className:"Container"},r.a.createElement("h1",null,"Not Found"),r.a.createElement("p",null,"The page you requested cannot be found"),r.a.createElement(P.a,{className:"Button",to:"/"},"Home"))}var T=a(11);function B(e){return Object(T.c)(e)}function L(e){var t=e.username,a=e.onLogout;return r.a.createElement("span",{style:{textAlign:"right"}},"Welcome, ",r.a.createElement("b",null,t),r.a.createElement("br",null),r.a.createElement("button",{className:"Link",onClick:a},"Logout"))}function _(){return"/login"===Object(s.g)().pathname?r.a.createElement(P.a,{className:"Button",to:"/"},"Home"):r.a.createElement(P.a,{className:"Button",to:{pathname:"/login",state:{redirectAfter:"/"}}},"Login")}function U(){var e=B((function(e){var t;return null===(t=e.auth)||void 0===t?void 0:t.username})),t=Object(T.b)();return r.a.createElement("header",null,r.a.createElement(P.a,{to:"/"},r.a.createElement("h1",null,"React Training Blog")),e?r.a.createElement(L,{username:e,onLogout:function(){t({type:"LOGOUT"})}}):r.a.createElement(_,null))}var x=a(6);function N(e){var t=r.a.useState(e.initialTitle||""),a=Object(x.a)(t,2),n=a[0],o=a[1],i=r.a.useState(e.initialBody||""),l=Object(x.a)(i,2),s=l[0],u=l[1];var c=!n||!s;return r.a.createElement("div",{className:"Container"},r.a.createElement("h1",null,"Create Post"),r.a.createElement("label",null,"Title",r.a.createElement("input",{value:n,onChange:function(e){return o(e.currentTarget.value)}})),r.a.createElement("label",null,"Body",r.a.createElement("textarea",{value:s,onChange:function(e){return u(e.currentTarget.value)}})),e.error&&r.a.createElement("p",null,e.error),r.a.createElement("button",{onClick:function(){o(""),u("")}},"Clear"),r.a.createElement("button",{disabled:c,onClick:function(){e.onSavePost({title:n,body:s})}},"Save Post"))}var C=a(3),A=a.n(C);function R(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{method:"POST"},a=B((function(e){var t;return null===(t=e.auth)||void 0===t?void 0:t.token})),n=r.a.useState({loading:!1,data:null,called:!1}),o=Object(x.a)(n,2),i=o[0],l=o[1];function s(n){var r,o,s,u;return A.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:return c.prev=0,o={"Content-Type":"application/json"},a&&(o.Authorization=a),l((function(e){return{called:e.called,loading:!0,data:e.data}})),c.next=6,A.a.awrap(fetch(e,{method:t.method||"POST",headers:o,body:JSON.stringify(n)}));case 6:return s=c.sent,c.next=9,A.a.awrap(s.json());case 9:u=c.sent,r=s.status>=200&&s.status<300?{called:!0,loading:!1,data:u}:{called:!0,loading:!1,error:u},c.next=17;break;case 13:c.prev=13,c.t0=c.catch(0),console.error("Fetch failed",c.t0),r={called:!0,loading:!1,data:i.data,error:c.t0};case 17:return l(r),c.abrupt("return",r);case 19:case"end":return c.stop()}}),null,null,[[0,13]])}return[s,i]}function z(e){var t=e.children;return r.a.createElement("div",{className:"Container"},r.a.createElement("div",{className:"Spinner"},t&&r.a.createElement("h1",null,t),r.a.createElement("div",{className:"bounce bounce1"}),r.a.createElement("div",{className:"bounce bounce2"}),r.a.createElement("div",{className:"bounce bounce3"})))}function q(){return r.a.createElement("div",{className:"Container"},r.a.createElement("h1",null,"Your new post have been saved."),r.a.createElement(P.a,{className:"Button",to:"/"},"Home"))}function D(){var e=R("/api/posts"),t=Object(x.a)(e,2),a=t[0],n=t[1],o=n.loading,i=n.error,l=n.called;if(!B((function(e){return null!=e.auth})))return r.a.createElement(s.a,{to:"/login"});var u=i?"error"in i?i.error:i.toString():null;return l&&!u?r.a.createElement(q,null):o?r.a.createElement(z,null,"Saving...."):r.a.createElement(N,{onSavePost:a,error:u})}var H=a(121),G=a.n(H);function F(e){return G()(e).format("DD.MM.YYYY")}function M(e){return"/post/".concat(e.id)}function Y(e){return{type:"API_REQUEST_START",payload:{description:e}}}function K(e){return{type:"API_REQUEST_FAILURE",payload:{error:e}}}function V(e,t){var a,n,r;return A.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:return a="".concat("/api").concat(e),n=t?{headers:{Authorization:t}}:void 0,o.next=4,A.a.awrap(fetch(a,n));case 4:if((r=o.sent).ok){o.next=7;break}throw new Error("Response from server not OK: ".concat(r.status));case 7:return o.next=9,A.a.awrap(r.json());case 9:return o.abrupt("return",o.sent);case 10:case"end":return o.stop()}}))}function Z(e){return function(t,a){var n=a().auth;n&&(t(function(e,t){return{type:"TOGGLE_POST_LIKE_ACTION",payload:{postId:e,userId:t}}}(e,n.userId)),function(e,t,a){var n,r,o,i=arguments;return A.a.async((function(l){for(;;)switch(l.prev=l.next){case 0:return n=i.length>3&&void 0!==i[3]?i[3]:{},r="".concat("/api").concat(t),l.next=4,A.a.awrap(fetch(r,{method:e,body:JSON.stringify(n),headers:{Accept:"application/json","Content-Type":"application/json",Authorization:a}}));case 4:if((o=l.sent).ok){l.next=7;break}throw new Error("Response from server not OK: ".concat(o.status));case 7:return l.next=9,A.a.awrap(o.json());case 9:return l.abrupt("return",l.sent);case 10:case"end":return l.stop()}}))}("post","/posts/".concat(e,"/like"),n.token).then((function(a){t(function(e,t,a){return{type:"UPDATE_POST_LIKES",payload:{postId:e,likes:t,likedBy:a}}}(e,a.likes,a.likedBy))}),(function(e){return console.error("Could not update post",e)})))}}function J(e,t){return{type:"SET_BLOGLIST_SORT",sortBy:e,direction:t}}function Q(e){var t=e.flavor,a=e.children;return r.a.createElement("div",{className:"Badge ".concat(t,"Badge")},a)}function W(){return r.a.createElement(Q,{flavor:"User"},"Your Post!")}function X(){return r.a.createElement(Q,{flavor:"Unpublished"},"Unpublished")}function $(e){var t=e.children;return r.a.createElement("div",{className:"Badges"},t)}function ee(e){var t=e.children,a=e.active,n=e.onSelect;return r.a.createElement("span",{className:"SelectableOption".concat(a?" active":""),onClick:n},t)}function te(e){var t=e.isLoggedIn,a=Object(T.b)(),n=B((function(e){return{orderBy:e.blogListOptions.sortBy,direction:e.blogListOptions.order}})),o=n.orderBy,i=n.direction;function l(e){a(J(e,i))}function s(e){a(J(o,e))}return r.a.createElement("div",{className:"PostListHeader"},r.a.createElement("div",null,t&&r.a.createElement(P.a,{className:"Button",to:"/add"},"Add Post")),r.a.createElement("div",{className:"PostListOptions"},"Order by"," ",r.a.createElement(ee,{active:"date"===o,onSelect:function(){return l("date")}},"Date")," ","|"," ",r.a.createElement(ee,{active:"likes"===o,onSelect:function(){return l("likes")}},"Likes")," ","(",r.a.createElement(ee,{active:"asc"===i,onSelect:function(){return s("asc")}},"asc")," ","/"," ",r.a.createElement(ee,{active:"desc"===i,onSelect:function(){return s("desc")}},"desc"),")"))}function ae(e){var t=e.posts,a=B((function(e){var t;return null===(t=e.auth)||void 0===t?void 0:t.userId})),n=Object(T.b)();return r.a.createElement(r.a.Fragment,null,r.a.createElement(te,{isLoggedIn:!!a}),t.map((function(e){return r.a.createElement(ne,{key:e.id,post:e,currentUserId:a,onLikePost:function(){return t=e.id,void n(Z(t));var t}})})))}function ne(e){var t,a=e.post,n=e.currentUserId,o=e.onLikePost;if(n){var i=a.likedBy.includes(n);t=r.a.createElement("button",{className:"LikeButton",onClick:o},a.likes," Likes ",i&&r.a.createElement(r.a.Fragment,null,"(including me!)"))}else t=r.a.createElement(r.a.Fragment,null," (",a.likes," Likes)");return r.a.createElement("article",{className:"Container"},r.a.createElement("p",{className:"Date"},F(a.date)),r.a.createElement("header",null,r.a.createElement(P.a,{key:a.id,to:M(a)},r.a.createElement("h1",null,a.title)),r.a.createElement($,null,n===a.userId&&r.a.createElement(W,null),a.published||r.a.createElement(X,null))),r.a.createElement(P.a,{key:a.id,to:M(a)},r.a.createElement("span",null,"Read more"))," ",t)}function re(){var e=B((function(e){var t;return{orderBy:e.blogListOptions.sortBy,direction:e.blogListOptions.order,token:null===(t=e.auth)||void 0===t?void 0:t.token}})),t=e.orderBy,a=e.direction,n=e.token,o=B((function(e){return e.blog.posts})),i=Object(T.b)();return r.a.useEffect((function(){i(function(e,t,a){return function(n,r){var o=r(),i=o.blog;o.api.error||i.posts.length>0&&i.options.orderBy===e&&i.options.direction===t&&i.options.token===a||(n(Y("Loading Posts")),V("/posts?full&orderBy=".concat(e,"&direction=").concat(t),a).then((function(r){n(function(e,t){return{type:"SET_POSTS",options:t,posts:e}}(r,{orderBy:e,direction:t,token:a})),n({type:"API_REQUEST_SUCCESS"})}),(function(e){return n(K(e))})))}}(t,a,n))}),[i,t,n,a]),r.a.createElement(ae,{posts:o})}function oe(e){var t=e.post;return r.a.createElement("article",{className:"Container"},r.a.createElement("h1",null,t.title),t.body.split("\\n").map((function(e,a){return r.a.createElement("p",{key:"".concat(t.id,"_").concat(a)},e)})))}function ie(){var e=Object(T.b)(),t=Object(s.h)().postId,a=B((function(e){return e.blog.posts.find((function(e){return e.id===t&&"body"in e}))||null}));if(!t)throw new Error("Param PostId must be defined");return r.a.useEffect((function(){e(function(e){return function(t,a){var n=a().blog.posts.find((function(t){return t.id===e}));if(n&&"body"in n)return n;t(Y("Loading Post ".concat(e))),V("/posts/".concat(e)).then((function(e){t(function(e){return{type:"SET_FULL_POST",payload:{post:e}}}(e)),t({type:"API_REQUEST_SUCCESS"})}),(function(e){return t(K(e))}))}}(t)),e(function(e){return{type:"POST_SHOWN",payload:{postId:e}}}(t))}),[e,t]),a&&r.a.createElement(r.a.Fragment,null,r.a.createElement(P.a,{className:"Button",to:"/"},"Home"),r.a.createElement(oe,{post:a}))}function le(e){var t=e.error,a=e.onLogin,n=r.a.useState(""),o=Object(x.a)(n,2),i=o[0],l=o[1],s=r.a.useState(""),u=Object(x.a)(s,2),c=u[0],d=u[1];return r.a.createElement("div",{className:"Container"},r.a.createElement("h1",null,"Login"),r.a.createElement("label",null,"Username",r.a.createElement("input",{value:i,onChange:function(e){return l(e.currentTarget.value)}})),r.a.createElement("p",null,"(Valid logins: nils, susi, klaus, sua, lauren, olivia, cathy, maja)"),r.a.createElement("label",null,"Passwort",r.a.createElement("input",{type:"password",value:c,onChange:function(e){return d(e.currentTarget.value)}})),r.a.createElement("p",null,"(Use any non-empty string as password)"),t&&r.a.createElement("p",{className:"Error"},t),r.a.createElement("button",{onClick:function(){a(i,c)}},"Login"))}function se(e,t,a){return{type:"LOGIN",payload:{token:e,userId:t,username:a}}}function ue(e){return{type:"HISTORY_PUSH",location:e}}function ce(){var e=Object(s.g)(),t=R("/api/login"),a=Object(x.a)(t,2),n=a[0],o=a[1],i=o.error,l=o.loading,u=Object(T.b)();if(l)return r.a.createElement(z,null,"Login... Please wait");var c=i?"error"in i?i.error:i.toString():null;return r.a.createElement(le,{error:c,onLogin:function(t,a){var r,o,i,l,s,c;return A.a.async((function(d){for(;;)switch(d.prev=d.next){case 0:return d.next=2,A.a.awrap(n({login:t,password:a}));case 2:if(o=d.sent,i=o.data,(m=i)&&"token"in m){d.next=6;break}return d.abrupt("return");case 6:l=i.token,s=i.user,u(se(l,s.id,s.name)),c=(null===(r=e.state)||void 0===r?void 0:r.redirectAfter)||"/add",u(ue(c));case 10:case"end":return d.stop()}var m}))}})}function de(e){var t=e.children;return r.a.createElement("div",{className:"Page"},t)}function me(e){var t=e.children;return r.a.createElement("div",{className:"Sidebar"},t)}function pe(e){var t=e.children;return r.a.createElement("div",{className:"Main"},t)}var he=a(122),fe=Object(he.a)([function(e){return e.viewHistory.postsViewed},function(e){return e.blog.posts}],(function(e,t){return console.log("selectedViewsPosts called!"),e.map((function(e){return t.find((function(t){return t.id===e}))})).filter((function(e){return void 0!==e}))})),ge={postsViewed:[]};function be(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",null,"View History"),r.a.createElement(ye,null))}function ye(){var e=B(fe);return r.a.createElement(r.a.Fragment,null,e.map((function(e){return r.a.createElement("article",{key:e.id},r.a.createElement("p",{className:"Date"},F(e.date)),r.a.createElement(P.a,{to:M(e)},r.a.createElement("h1",null,e.title),r.a.createElement("p",null,e.likes," Likes")))})))}function ve(e){var t=e.children;return r.a.createElement(de,null,r.a.createElement(pe,null,t),r.a.createElement(me,null,r.a.createElement(be,null)))}var ke=function(){var e=B((function(e){return e.api.loading})),t=B((function(e){return e.api.description})),a=B((function(e){return e.api.error})),n=!e&&!a;return r.a.createElement("div",{className:"App"},r.a.createElement(U,null),e&&r.a.createElement(z,null,t),a&&r.a.createElement(Ee,{msg:a}),n&&r.a.createElement(s.d,null,r.a.createElement(s.b,{exact:!0,path:"/"},r.a.createElement(ve,null,r.a.createElement(re,null))),r.a.createElement(s.b,{path:"/post/:postId"},r.a.createElement(ve,null,r.a.createElement(ie,null))),r.a.createElement(s.b,{path:"/add"},r.a.createElement(D,null)),r.a.createElement(s.b,{path:"/login"},r.a.createElement(ce,null)),r.a.createElement(s.b,null,r.a.createElement(j,null))),r.a.createElement("footer",null,r.a.createElement("div",null,r.a.createElement("span",null,"React Example App, Source Code:","  "),r.a.createElement("a",{href:"https://github.com/nilshartmann/react-statemanagement-examples"},"https://github.com/nilshartmann/react-statemanagement-examples"))))};function Ee(e){var t=e.msg;return r.a.createElement("div",null,r.a.createElement("h1",null,"API Request Failed!"),r.a.createElement("p",null,t.toString()))}var we=a(25),Se=a(123),Ie={loading:!1,description:null,error:null};var Oe={posts:[],options:{orderBy:"",direction:""}};var Pe=a(124),je={sortBy:"date",order:"desc",likes:-1};var Te=Object(we.c)({auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN":return Object(u.a)({},t.payload);case"LOGOUT":return null;default:return e}},blogListOptions:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:je,t=arguments.length>1?arguments[1]:void 0;return Object(Pe.a)(e,(function(e){switch(t.type){case"SET_BLOGLIST_FILTER_BY_LIKES":return void(e.likes=t.likes);case"SET_BLOGLIST_SORT":e.sortBy=t.sortBy,e.order=t.direction}}))},blog:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Oe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_POSTS":return{posts:t.posts,options:t.options};case"SET_FULL_POST":return e.posts.find((function(e){return e.id===t.payload.post.id}))?Object(u.a)({},e,{posts:e.posts.map((function(e){return e.id!==t.payload.post.id?e:t.payload.post}))}):Object(u.a)({},e,{posts:[].concat(Object(h.a)(e.posts),[t.payload.post])});case"TOGGLE_POST_LIKE_ACTION":return Object(u.a)({},e,{posts:e.posts.map((function(e){if(e.id!==t.payload.postId)return e;var a=e.likedBy.filter((function(e){return e!==t.payload.userId})),n=e.likes;return a.length===e.likedBy.length?(a.push(t.payload.userId),n++):n--,Object(u.a)({},e,{likes:n,likedBy:a})}))});case"UPDATE_POST_LIKES":return Object(u.a)({},e,{posts:e.posts.map((function(e){return e.id===t.payload.postId?Object(u.a)({},e,{likedBy:t.payload.likedBy,likes:t.payload.likes}):e}))});default:return e}},api:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ie,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"API_REQUEST_START":return{description:t.payload.description,loading:!0,error:null};case"API_REQUEST_SUCCESS":return Object(u.a)({},e,{loading:!1,error:null});case"API_REQUEST_FAILURE":return Object(u.a)({},e,{loading:!1,error:t.payload.error.toString()})}return e},viewHistory:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ge,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"POST_SHOWN":return e.postsViewed.length>0&&e.postsViewed[0]===t.payload.postId?e:{postsViewed:[t.payload.postId].concat(e.postsViewed.filter((function(e){return e!==t.payload.postId})))};default:return e}}}),Be=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__({trace:!0}):we.d;var Le=Object(l.b)(),_e=function(e){var t=Object(we.a)(function(e){return function(t){return function(t){return function(a){if("HISTORY_PUSH"!==a.type)return t(a);e.push(a.location)}}}}(e),Se.a),a=Be(t);return Object(we.e)(Te,a)}(Le);i.a.render(r.a.createElement(T.a,{store:_e},r.a.createElement(s.c,{history:Le},r.a.createElement(ke,null))),document.getElementById("root"))}},[[127,1,2]]]);
//# sourceMappingURL=main.92e6211b.chunk.js.map