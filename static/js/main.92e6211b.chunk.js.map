{"version":3,"sources":["backend-mock/dummy-data.js","backend-mock/datastore.js","backend-mock/index.ts","NotFound.tsx","useAppSelector.tsx","AppHeader.tsx","blog/editor/PostEditor.tsx","api/useWriteApi.ts","LoadingIndicator.tsx","blog/editor/PostEditorPage.tsx","utils.ts","api/apiActions.ts","api/fetch-api.ts","blog/blogActions.ts","blog/blogOptionActions.ts","blog/postlist/PostList.tsx","blog/postlist/PostListPage.tsx","blog/post/FullPost.tsx","blog/post/PostPage.tsx","blog/viewHistoryActions.ts","auth/LoginForm.tsx","auth/authActions.ts","navigateActions.ts","auth/LoginPage.tsx","Layout.tsx","blog/viewHistoryReducer.ts","blog/sidebar/Sidebar.tsx","blog/BlogPage.tsx","App.tsx","api/apiReducer.ts","blog/blogReducer.ts","blog/blogOptionReducer.ts","reducers.ts","auth/authReducer.ts","configureStore.ts","index.tsx"],"names":["users","id","login","name","posts","Map","body","likedBy","title","likes","date","userId","published","orderByDateNewestFirst","p1","p2","Date","orderByDateOldestFirst","getPost","postId","get","getUser","find","u","timeout","Math","floor","random","getUserId","req","token","headers","payload","jwt","verify","user","datastore","error","handlers","rest","post","res","ctx","status","json","password","sign","expiresIn","result","orderByFn","allPosts","values","filter","sort","undefined","map","p","orderBy","url","searchParams","direction","author","r","localeCompare","delay","params","newPost","toISOString","size","set","likedPost","Error","newLikedBy","l","newLikes","length","push","updatedPost","setupWorker","start","NotFoundPage","className","to","useAppSelector","fn","useSelector","UserBadge","username","onLogout","style","textAlign","onClick","LoginButton","useLocation","pathname","state","redirectAfter","AppHeader","auth","dispatch","useDispatch","type","PostEditor","props","React","useState","initialTitle","setTitle","initialBody","setBody","saveButtonDisabled","value","onChange","e","currentTarget","disabled","onSavePost","useWriteApi","options","method","loading","data","called","setState","a","async","oldState","fetch","JSON","stringify","newState","console","LoadingIndicator","children","SuccessConfirmation","PostEditorPage","savePost","errorMessage","toString","formattedDate","moment","format","linkToPost","apiRequestStart","description","apiRequestFailure","fetchJson","path","Authorization","response","ok","toggleLikePost","getState","togglePostLike","Accept","sendJson","then","updatePostLikes","setBlogListSort","sortBy","Badge","flavor","DraftBadge","Badges","SelectableOption","active","onSelect","PostListHeader","isLoggedIn","blogListOptions","order","updateOrderBy","newOrderBy","updateDirection","newDirection","PostList","currentUserId","PostSummary","key","onLikePost","likedByMe","includes","PostListPageMain","blog","useEffect","api","setPosts","loadPostsFromServer","FullPost","split","ix","PostPage","useParams","candidate","setFullPost","loadPostFromServer","postShown","LoginForm","onLogin","setLogin","setPassword","navigateTo","location","LoginPage","mutate","loginAction","Page","Sidebar","Main","selectedViewsPosts","createSelector","viewHistory","postsViewed","viewedPostIds","log","defaultViewHistoryState","SidebarContent","viewedPosts","BlogPage","App","dataAvailable","msg","exact","href","intialApiState","defaultBlogState","defaultSortOptions","rootReducer","combineReducers","action","produce","oldPost","concat","pId","composeEnhancers","window","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","trace","compose","history","createHashHistory","store","middleware","applyMiddleware","next","createRouterMiddleware","thunk","enhancer","createStore","reducer","configureStore","ReactDOM","render","document","getElementById"],"mappings":"qWA4IMA,EAAQ,CACZ,CAAEC,GAAI,KAAMC,MAAO,OAAQC,KAAM,iBACjC,CAAEF,GAAI,KAAMC,MAAO,OAAQC,KAAM,gBACjC,CAAEF,GAAI,KAAMC,MAAO,QAASC,KAAM,mBAClC,CAAEF,GAAI,KAAMC,MAAO,MAAOC,KAAM,cAChC,CAAEF,GAAI,KAAMC,MAAO,SAAUC,KAAM,gBACnC,CAAEF,GAAI,KAAMC,MAAO,SAAUC,KAAM,gBACnC,CAAEF,GAAI,KAAMC,MAAO,QAASC,KAAM,eAClC,CAAEF,GAAI,KAAMC,MAAO,OAAQC,KAAM,e,MAI1B,CACLC,MAAO,IAAIC,IAzJD,CACZ,CACE,KACA,CACEJ,GAAI,KACJK,KACE,krFACFC,QAAS,GACTC,MAAO,8BACPC,MAAO,GACPC,KAAM,2BACNC,OAAQ,KACRC,WAAW,IAGf,CACE,KACA,CACEX,GAAI,KACJK,KACE,69BACFC,QAAS,GACTC,MAAO,yBACPC,MAAO,GACPC,KAAM,2BACNC,OAAQ,KACRC,WAAW,IAGf,CACE,KACA,CACEX,GAAI,KACJK,KACE,s6BACFC,QAAS,GACTC,MAAO,yBACPC,MAAO,GACPC,KAAM,2BACNC,OAAQ,OAGZ,CACE,KACA,CACEV,GAAI,KACJK,KACE,0jBACFC,QAAS,GACTC,MAAO,6BACPC,MAAO,GACPC,KAAM,2BACNC,OAAQ,KACRC,WAAW,IAGf,CACE,KACA,CACEX,GAAI,KACJK,KACE,2xCACFC,QAAS,GACTC,MAAO,+CACPC,MAAO,GACPC,KAAM,2BACNC,OAAQ,KACRC,WAAW,IAGf,CACE,KACA,CACEX,GAAI,KACJK,KACE,+pCACFC,QAAS,GACTC,MAAO,0BACPC,MAAO,GACPC,KAAM,2BACNC,OAAQ,KACRC,WAAW,IAGf,CACE,KACA,CACEX,GAAI,KACJK,KACE,gqBACFC,QAAS,GACTC,MAAO,+BACPC,MAAO,GACPC,KAAM,2BACNC,OAAQ,OAGZ,CACE,KACA,CACEV,GAAI,KACJK,KACE,6rCACFC,QAAS,GACTC,MAAO,wCACPC,MAAO,GACPC,KAAM,2BACNC,OAAQ,KACRC,WAAW,IAGf,CACE,KACA,CACEX,GAAI,KACJK,KACE,isCACFC,QAAS,GACTC,MAAO,wBACPC,MAAO,GACPC,KAAM,2BACNC,OAAQ,KACRC,WAAW,IAGf,CACE,MACA,CACEX,GAAI,MACJK,KACE,kpBACFC,QAAS,GACTC,MAAO,sBACPC,MAAO,GACPC,KAAM,2BACNC,OAAQ,KACRC,WAAW,MAkBbZ,SCvIIA,E,EAAAA,MAAOI,E,EAAAA,MAOFS,EAAyB,SAACC,EAAIC,GAAL,OAAY,IAAIC,KAAKD,EAAGL,MAAQ,IAAIM,KAAKF,EAAGJ,OACrEO,EAAyB,SAACH,EAAIC,GAAL,OAAY,IAAIC,KAAKF,EAAGJ,MAAQ,IAAIM,KAAKD,EAAGL,OAY3E,SAASQ,EAAQC,GACtB,OAAOf,EAAMgB,IAAID,GAOZ,SAASE,EAAQV,GACtB,OAAOX,EAAMsB,MAAK,SAACC,GAAD,OAAOA,EAAEtB,KAAOU,KCjCpC,IAAMa,EAAU,kBAA4C,KAArCC,KAAKC,MAAsB,EAAhBD,KAAKE,UAAgB,IAEvD,SAASC,EAAUC,GACjB,IAAMC,EAAQD,EAAIE,QAAQX,IAAI,iBAC9B,GAAIU,EAAO,CACT,IAAME,EAAeC,IAAIC,OAAOJ,EAfjB,gBAgBTK,EAAOC,EAAkBJ,EAAQrB,QACvC,OAAKwB,EAIE,CAAExB,OAAQwB,EAAKlC,IAHb,CAAEoC,MAAM,iBAAD,OAAmBL,EAAQrB,OAA3B,gBAMlB,OAAO,KAGT,IAAM2B,EAAW,CACfC,IAAKC,KAAK,cAAc,SAACX,EAAKY,EAAKC,GACjC,IAAMxC,EAAa2B,EAAIvB,KAEvB,IAAKJ,EACH,OAAOuC,EAAIC,EAAIC,OAAO,KAAMD,EAAIE,KAAK,CAAEP,MAAO,qCAGhD,IAAKnC,EAAMA,MACT,OAAOuC,EAAIC,EAAIC,OAAO,KAAMD,EAAIE,KAAK,CAAEP,MAAO,iCAGhD,IAAKnC,EAAM2C,SACT,OAAOJ,EAAIC,EAAIC,OAAO,KAAMD,EAAIE,KAAK,CAAEP,MAAO,oCAGhD,IAzCc1B,EAyCRwB,EDGH,SAAwBjC,GAC7B,OAAOF,EAAMsB,MAAK,SAACC,GAAD,OAAOA,EAAErB,QAAUA,KCJtBkC,CAAyBlC,EAAMA,OAE5C,OAAKiC,EAIEM,EACLC,EAAIC,OAAO,KACXD,EAAIE,KAAK,CACPd,OAlDUnB,EAkDMwB,EAAKlC,GAjDbgC,IAAIa,KAAK,CAAEnC,UAHR,eAG8B,CAC7CoC,UAAW,cAiDPZ,UAPKM,EAAIC,EAAIC,OAAO,KAAMD,EAAIE,KAAK,CAAEP,MAAO,qBAWlDE,IAAKnB,IAAI,cAAc,SAACS,EAAKY,EAAKC,GAChC,IAAMP,EAAOP,EAAUC,GACvB,UAAIM,QAAJ,IAAIA,OAAJ,EAAIA,EAAME,MACR,OAAOI,EAAIC,EAAIC,OAAO,KAAMD,EAAIE,KAAKT,IAEvC,IAAIa,EDtCD,WAAkE,IAA7CC,EAA4C,uDAAhCpC,EAAwBF,EAAQ,uCAChEuC,EAAW,YAAI9C,EAAM+C,UAAUC,QAAO,SAACZ,GAC3C,OAAOA,EAAK5B,WAAa4B,EAAK7B,SAAWA,KAK3C,OAFAuC,EAASG,KAAKJ,GAEPC,EC+BQd,MAAsBkB,EAAtB,OAAiCnB,QAAjC,IAAiCA,OAAjC,EAAiCA,EAAMxB,QAAQ4C,KAAI,SAACC,GAAD,sBAC3DA,EAD2D,CAE9DlD,UAAMgD,OAGFG,EAAU5B,EAAI6B,IAAIC,aAAavC,IAAI,WACnCwC,EAAY/B,EAAI6B,IAAIC,aAAavC,IAAI,aAkC3C,MAhCgB,gBAAZqC,EACFT,EAAOK,KAAKjB,GACS,gBAAZqB,EACTT,EAAOK,KAAKjB,GACS,SAAZqB,EACS,SAAdG,EACFZ,EAAOK,KAAKjB,GAEZY,EAAOK,KAAKjB,GAEO,UAAZqB,EACS,SAAdG,EACFZ,EAAOK,MAAK,SAACvC,EAAIC,GAAL,OAAYD,EAAGL,MAAQM,EAAGN,SAEtCuC,EAAOK,MAAK,SAACvC,EAAIC,GAAL,OAAYA,EAAGN,MAAQK,EAAGL,SAEnB,WAAZgD,GACTT,EAAOK,MAAK,SAACvC,EAAIC,GACf,IAAKD,EAAG+C,SAAW9C,EAAG8C,OAEpB,OAAOzB,EAAiCtB,EAAIC,GAG9C,IAAM+C,EAAIhD,EAAG+C,OAAOE,cAAchD,EAAG8C,QACrC,OAAU,IAANC,EACK1B,EAAiCtB,EAAIC,GAGvC+C,KAIJrB,EAAIC,EAAIsB,MAAMxC,KAAYkB,EAAIE,KAAKI,OAE5CT,IAAKnB,IAAI,kBAAkB,SAACS,EAAKY,EAAKC,GACpC,IAAMF,EAAOJ,EAAkBP,EAAIoC,OAAOhE,IAE1C,IAAKuC,EACH,OAAOC,EAAIC,EAAIC,OAAO,KAAMD,EAAIE,KAAK,CAAEP,MAAM,SAAD,OAAWR,EAAIoC,OAAOhE,GAAtB,kBAG9C,IAAMkC,EAAOC,EAAkBI,EAAK7B,QACpC,OAAKwB,EAIEM,EAAIC,EAAIsB,MAAMxC,KAAYkB,EAAIE,KAAJ,eAAcJ,EAAd,CAAoBL,WAH5CM,EAAIC,EAAIC,OAAO,KAAMD,EAAIE,KAAK,CAAEP,MAAM,SAAD,OAAWG,EAAK7B,OAAhB,qBAMhD4B,IAAKC,KAAK,cAAc,SAACX,EAAKY,EAAKC,GACjC,IAAMP,EAAOP,EAAUC,GAEvB,IAAKM,EACH,OAAOM,EACLC,EAAIC,OAAO,KACXD,EAAIE,KAAK,CAAEP,MAAO,kDAItB,UAAIF,QAAJ,IAAIA,OAAJ,EAAIA,EAAME,MACR,OAAOI,EAAIC,EAAIC,OAAO,KAAMD,EAAIE,KAAKT,IAGvC,IAAMK,EAAYX,EAAIvB,KACtB,IAAKkC,EACH,OAAOC,EAAIC,EAAIC,OAAO,KAAMD,EAAIE,KAAK,CAAEP,MAAO,0BAGhD,IAAKG,EAAKhC,MACR,OAAOiC,EAAIC,EAAIC,OAAO,KAAMD,EAAIE,KAAK,CAAEP,MAAO,8CAGhD,IAAKG,EAAKlC,KACR,OAAOmC,EAAIC,EAAIC,OAAO,KAAMD,EAAIE,KAAK,CAAEP,MAAO,6CAGhD,IAAM6B,ED1CH,SAAoBvD,EAApB,GAA8C,IAC7CuD,EAAU,CACdvD,SACAH,MAHgD,EAAfA,MAIjCF,KAJgD,EAARA,KAKxCG,MAAO,EACPF,QAAS,GACTG,MAAM,IAAIM,MAAOmD,cACjBlE,GAAG,IAAD,OAAMG,EAAMgE,KAAO,IAKvB,OAFAhE,EAAMiE,IAAIH,EAAQjE,GAAIiE,GAEfA,EC6BW9B,CAAqBD,EAAKxB,OAAQ6B,GAElD,OAAOC,EAAIC,EAAIC,OAAO,KAAMD,EAAIE,KAAKsB,OAGvC3B,IAAKC,KAAK,uBAAuB,SAACX,EAAKY,EAAKC,GAC1C,IAAMF,EAAOJ,EAAkBP,EAAIoC,OAAOhE,IAE1C,IAAKuC,EACH,OAAOC,EAAIC,EAAIC,OAAO,KAAMD,EAAIE,KAAK,CAAEP,MAAM,SAAD,OAAWR,EAAIoC,OAAOhE,GAAtB,kBAG9C,GAAgB,OAAZuC,EAAKvC,GAEP,OAAOwC,EACLC,EAAIC,OAAO,KACXD,EAAIE,KAAK,CACPzB,OAAQqB,EAAKvC,GACbM,QAASiC,EAAKjC,QACdE,MAAO+B,EAAK/B,SAKlB,IAAM0B,EAAOP,EAAUC,GACvB,UAAIM,QAAJ,IAAIA,OAAJ,EAAIA,EAAME,MACR,OAAOI,EAAIC,EAAIC,OAAO,KAAMD,EAAIE,KAAKT,IAGvC,IAAMmC,ED7HH,SAAkBnD,EAAQR,GAC/B,IAAM6B,EAAOpC,EAAMgB,IAAID,GAEvB,IAAKqB,EACH,MAAM,IAAI+B,MAAJ,gCAAmCpD,EAAnC,MAGR,IAAIqD,EAAahC,EAAKjC,QAAQ6C,QAAO,SAACqB,GAAD,OAAOA,IAAM9D,KAC9C+D,EAAWlC,EAAK/B,MAChBE,EACE6D,EAAWG,SAAWnC,EAAKjC,QAAQoE,QACrCH,EAAWI,KAAKjE,GAChB+D,KAEAA,IAIFA,IAGF,IAAMG,EAAW,eACZrC,EADY,CAEf/B,MAAOiE,EACPnE,QAASiE,IAKX,OAFApE,EAAMiE,IAAIlD,EAAQ0D,GAEXA,ECgGazC,CAAmBI,EAAKvC,GAAxB,OAA4BkC,QAA5B,IAA4BA,OAA5B,EAA4BA,EAAMxB,QACpD,OAAO8B,EACLC,EAAIC,OAAO,KACXD,EAAIE,KAAK,CACPzB,OAAQmD,EAAUrE,GAClBM,QAAS+D,EAAU/D,QACnBE,MAAO6D,EAAU7D,aAMVqE,IAAW,WAAX,EAAexC,GACvByC,Q,mBC9LQ,SAASC,IACtB,OACE,yBAAKC,UAAU,aACb,yCACA,qEACA,kBAAC,IAAD,CAAMA,UAAU,SAASC,GAAG,KAA5B,S,YCLS,SAASC,EAAkBC,GACxC,OAAOC,YAAYD,GCQrB,SAASE,EAAT,GAA4D,IAAvCC,EAAsC,EAAtCA,SAAUC,EAA4B,EAA5BA,SAC7B,OACE,0BAAMC,MAAO,CAAEC,UAAW,UAA1B,YACW,2BAAIH,GACb,6BACA,4BAAQN,UAAU,OAAOU,QAASH,GAAlC,WAON,SAASI,IAGP,MAAI,WAFaC,cAESC,SAEtB,kBAAC,IAAD,CAAMb,UAAU,SAASC,GAAG,KAA5B,QAOF,kBAAC,IAAD,CACED,UAAU,SACVC,GAAI,CACFY,SAAU,SACVC,MAAO,CACLC,cAAe,OALrB,SAcW,SAASC,IACtB,IAAMV,EAAWJ,GAAe,SAACY,GAAD,uBAAWA,EAAMG,YAAjB,aAAW,EAAYX,YACjDY,EAAWC,cAQjB,OACE,gCACE,kBAAC,IAAD,CAAMlB,GAAG,KACP,oDAEDK,EAAW,kBAACD,EAAD,CAAWC,SAAUA,EAAUC,SAX/C,WACEW,EAAS,CACPE,KAAM,cAS8D,kBAACT,EAAD,O,WCtD3D,SAASU,EAAWC,GAAyB,IAAD,EAC/BC,IAAMC,SAASF,EAAMG,cAAgB,IADN,mBAClDlG,EADkD,KAC3CmG,EAD2C,OAEjCH,IAAMC,SAASF,EAAMK,aAAe,IAFH,mBAElDtG,EAFkD,KAE5CuG,EAF4C,KASzD,IAAMC,GAAsBtG,IAAUF,EAEtC,OACE,yBAAK2E,UAAU,aACb,2CAEA,uCAEE,2BAAO8B,MAAOvG,EAAOwG,SAAU,SAACC,GAAD,OAAON,EAASM,EAAEC,cAAcH,WAGjE,sCAEE,8BAAUA,MAAOzG,EAAM0G,SAAU,SAACC,GAAD,OAAOJ,EAAQI,EAAEC,cAAcH,WAGjER,EAAMlE,OAAS,2BAAIkE,EAAMlE,OAE1B,4BAAQsD,QAvBZ,WACEgB,EAAS,IACTE,EAAQ,MAqBN,SACA,4BACEM,SAAUL,EACVnB,QAAS,WACPY,EAAMa,WAAW,CACf5G,QACAF,WALN,c,oBCzBS,SAAS+G,EACtB3D,GAIC,IAHD4D,EAGA,uDAHwB,CACtBC,OAAQ,QAGJzF,EAAQqD,GAAe,SAACY,GAAD,uBAAWA,EAAMG,YAAjB,aAAW,EAAYpE,SADpD,EAE0B0E,IAAMC,SAAwB,CACtDe,SAAS,EACTC,KAAM,KACNC,QAAQ,IALV,mBAEO3B,EAFP,KAEc4B,EAFd,KAQA,SAAenF,EAAKR,GAApB,qBAAA4F,EAAAC,OAAA,gEAGU9F,EAAuB,CAC3B,eAAgB,oBAEdD,IACFC,EAAO,cAAoBD,GAG7B6F,GAAS,SAACG,GAAD,MAAe,CACtBJ,OAAQI,EAASJ,OACjBF,SAAS,EACTC,KAAMK,EAASL,SAbrB,WAAAG,EAAA,MAgBsBG,MAAMrE,EAAK,CAC3B6D,OAAQD,EAAQC,QAAU,OAC1BxF,UACAzB,KAAM0H,KAAKC,UAAUjG,MAnB3B,cAgBUS,EAhBV,kBAAAmF,EAAA,MAsBuBnF,EAAIG,QAtB3B,OAsBUA,EAtBV,OAyBMsF,EADEzF,EAAIE,QAAU,KAAOF,EAAIE,OAAS,IACzB,CACT+E,QAAQ,EACRF,SAAS,EACTC,KAAM7E,GAGG,CACT8E,QAAQ,EACRF,SAAS,EACTnF,MAAOO,GAlCf,kDAsCIuF,QAAQ9F,MAAM,eAAd,MACA6F,EAAW,CACTR,QAAQ,EACRF,SAAS,EACTC,KAAM1B,EAAM0B,KACZpF,MAAM,EAAD,IA3CX,eA8CEsF,EAASO,GA9CX,kBA+CSA,GA/CT,yDAkDA,MAAO,CAAC1F,EAAMuD,GCvED,SAASqC,EAAT,GAAgE,IAApCC,EAAmC,EAAnCA,SACzC,OACE,yBAAKpD,UAAU,aACb,yBAAKA,UAAU,WACZoD,GAAY,4BAAKA,GAClB,yBAAKpD,UAAU,mBACf,yBAAKA,UAAU,mBACf,yBAAKA,UAAU,qBCNvB,SAASqD,IACP,OACE,yBAAKrD,UAAU,aACb,8DACA,kBAAC,IAAD,CAAMA,UAAU,SAASC,GAAG,KAA5B,SAOS,SAASqD,IAAkB,IAAD,EACQlB,EAAY,cADpB,mBAChCmB,EADgC,YACpBhB,EADoB,EACpBA,QAASnF,EADW,EACXA,MAAOqF,EADI,EACJA,OAGnC,IAFwBvC,GAAe,SAACY,GAAD,OAAyB,MAAdA,EAAMG,QAGtD,OAAO,kBAAC,IAAD,CAAUhB,GAAG,WAGtB,IAAMuD,EAAepG,EAAS,UAAWA,EAAQA,EAAMA,MAAQA,EAAMqG,WAAc,KAEnF,OAAIhB,IAAWe,EACN,kBAACH,EAAD,MAGLd,EACK,kBAACY,EAAD,mBAGF,kBAAC9B,EAAD,CAAYc,WAAYoB,EAAUnG,MAAOoG,I,sBCnC3C,SAASE,EAAcjI,GAC5B,OAAOkI,IAAOlI,GAAMmI,OAAO,cAOtB,SAASC,EAAWtG,GACzB,MAAM,SAAN,OAAgBA,EAAKvC,ICVhB,SAAS8I,EAAgBC,GAC9B,MAAO,CACL3C,KAAM,oBACNrE,QAAS,CACPgH,gBAeC,SAASC,EAAkB5G,GAChC,MAAO,CACLgE,KAAM,sBACNrE,QAAS,CACPK,UCrBC,SAAe6G,EAAUC,EAAcrH,GAAvC,mBAAA8F,EAAAC,OAAA,uDACCnE,EADD,UAFa,QAEb,OACwByF,GAEvB7B,EAAUxF,EACZ,CACEC,QAAS,CACPqH,cAAetH,SAGnBwB,EATC,WAAAsE,EAAA,MAWkBG,MAAMrE,EAAK4D,IAX7B,WAWC+B,EAXD,QAYSC,GAZT,sBAaG,IAAI/E,MAAJ,uCAA0C8E,EAAS1G,SAbtD,yBAAAiF,EAAA,MAeQyB,EAASzG,QAfjB,8ECsGA,SAAS2G,EACdpI,GAEA,OAAO,SAACgF,EAAUqD,GAAc,IACtBtD,EAASsD,IAATtD,KAEHA,IAKLC,EAvBJ,SAAwBhF,EAAgBR,GACtC,MAAO,CACL0F,KAAM,0BACNrE,QAAS,CACPb,SACAR,WAkBO8I,CAAetI,EAAQ+E,EAAKvF,SD7FlC,SAAwB4G,EAAoB4B,EAAcrH,GAA1D,+BAAA8F,EAAAC,OAAA,uDAAyE7F,EAAzE,+BAAmF,GAClF0B,EADD,UAtBa,QAsBb,OACwByF,GADxB,WAAAvB,EAAA,MAGkBG,MAAMrE,EAAK,CAChC6D,OAAQA,EACRjH,KAAM0H,KAAKC,UAAUjG,GACrBD,QAAS,CACP2H,OAAQ,mBACR,eAAgB,mBAChBN,cAAetH,MATd,WAGCuH,EAHD,QAaSC,GAbT,sBAcG,IAAI/E,MAAJ,uCAA0C8E,EAAS1G,SAdtD,yBAAAiF,EAAA,MAiBQyB,EAASzG,QAjBjB,8EC+FH+G,CAAS,OAAD,iBAAmBxI,EAAnB,SAAkC+E,EAAKpE,OAAO8H,MACpD,SAACpH,GACC2D,EAvCR,SAAyBhF,EAAgBV,EAAeF,GACtD,MAAO,CACL8F,KAAM,oBACNrE,QAAS,CACPb,SACAV,QACAF,YAiCWsJ,CAAgB1I,EAAQqB,EAAK/B,MAAO+B,EAAKjC,aAEpD,SAAC8B,GAAD,OAAW8F,QAAQ9F,MAAM,wBAAyBA,QCtHjD,SAASyH,EAAgBC,EAA0BnG,GACxD,MAAO,CACLyC,KAAM,oBACN0D,SACAnG,aCWJ,SAASoG,EAAT,GAAkD,IAAjCC,EAAgC,EAAhCA,OAAQ5B,EAAwB,EAAxBA,SACvB,OAAO,yBAAKpD,UAAS,gBAAWgF,EAAX,UAA2B5B,GAGlD,SAAS/C,IACP,OAAO,kBAAC0E,EAAD,CAAOC,OAAO,QAAd,cAGT,SAASC,IACP,OAAO,kBAACF,EAAD,CAAOC,OAAO,eAAd,eAIT,SAASE,EAAT,GAA4C,IAA1B9B,EAAyB,EAAzBA,SAChB,OAAO,yBAAKpD,UAAU,UAAUoD,GAYlC,SAAS+B,GAAT,GAAkF,IAAtD/B,EAAqD,EAArDA,SAAUgC,EAA2C,EAA3CA,OAAQC,EAAmC,EAAnCA,SAC5C,OACE,0BAAMrF,UAAS,0BAAqBoF,EAAS,UAAY,IAAM1E,QAAS2E,GACrEjC,GAKP,SAASkC,GAAT,GAA0D,IAAhCC,EAA+B,EAA/BA,WAClBrE,EAAWC,cADsC,EAGxBjB,GAAe,SAACY,GAAD,MAAY,CACxDtC,QAASsC,EAAM0E,gBAAgBV,OAC/BnG,UAAWmC,EAAM0E,gBAAgBC,UAF3BjH,EAH+C,EAG/CA,QAASG,EAHsC,EAGtCA,UAKjB,SAAS+G,EAAcC,GACrBzE,EAAS2D,EAAgBc,EAAYhH,IAEvC,SAASiH,EAAgBC,GACvB3E,EAAS2D,EAAgBrG,EAASqH,IAGpC,OACE,yBAAK7F,UAAU,kBACb,6BACGuF,GACC,kBAAC,IAAD,CAAMvF,UAAU,SAASC,GAAG,QAA5B,aAKJ,yBAAKD,UAAU,mBAAf,WACW,IACT,kBAACmF,GAAD,CAAkBC,OAAoB,SAAZ5G,EAAoB6G,SAAU,kBAAMK,EAAc,UAA5E,QAEoB,IAJtB,IAKI,IACF,kBAACP,GAAD,CAAkBC,OAAoB,UAAZ5G,EAAqB6G,SAAU,kBAAMK,EAAc,WAA7E,SAEoB,IARtB,IAUE,kBAACP,GAAD,CAAkBC,OAAsB,QAAdzG,EAAqB0G,SAAU,kBAAMO,EAAgB,SAA/E,OAEoB,IAZtB,IAaI,IACF,kBAACT,GAAD,CAAkBC,OAAsB,SAAdzG,EAAsB0G,SAAU,kBAAMO,EAAgB,UAAhF,QAdF,MAuBS,SAASE,GAAT,GAA6C,IAAzB3K,EAAwB,EAAxBA,MAC3B4K,EAAgB7F,GAAe,SAACY,GAAD,uBAAWA,EAAMG,YAAjB,aAAW,EAAYvF,UACtDwF,EAAWC,cAMjB,OACE,oCACE,kBAACmE,GAAD,CAAgBC,aAAcQ,IAC7B5K,EAAMmD,KAAI,SAACC,GAAD,OACT,kBAACyH,GAAD,CACEC,IAAK1H,EAAEvD,GACPuC,KAAMgB,EACNwH,cAAeA,EACfG,WAAY,kBAZFhK,EAYiBqC,EAAEvD,QAXnCkG,EAASoD,EAAepI,IAD1B,IAAkBA,SAwBpB,SAAS8J,GAAT,GAA6E,IACvExK,EADiB+B,EAAqD,EAArDA,KAAMwI,EAA+C,EAA/CA,cAAeG,EAAgC,EAAhCA,WAE1C,GAAKH,EAEE,CACL,IAAMI,EAAY5I,EAAKjC,QAAQ8K,SAASL,GACxCvK,EACE,4BAAQwE,UAAU,aAAaU,QAASwF,GACrC3I,EAAK/B,MADR,UACsB2K,GAAa,6DALrC3K,EAAQ,yCAAK+B,EAAK/B,MAAV,WAUV,OACE,6BAASwE,UAAU,aACjB,uBAAGA,UAAU,QAAQ0D,EAAcnG,EAAK9B,OACxC,gCACE,kBAAC,IAAD,CAAMwK,IAAK1I,EAAKvC,GAAIiF,GAAI4D,EAAWtG,IACjC,4BAAKA,EAAKhC,QAEZ,kBAAC2J,EAAD,KACGa,IAAkBxI,EAAK7B,QAAU,kBAAC,EAAD,MACjC6B,EAAK5B,WAAa,kBAACsJ,EAAD,QAGvB,kBAAC,IAAD,CAAMgB,IAAK1I,EAAKvC,GAAIiF,GAAI4D,EAAWtG,IACjC,4CACM,IACP/B,GCrJQ,SAAS6K,KAAoB,IAAD,EACHnG,GAAe,SAACY,GAAD,YAAY,CAC/DtC,QAASsC,EAAM0E,gBAAgBV,OAC/BnG,UAAWmC,EAAM0E,gBAAgBC,MACjC5I,MAAK,UAAEiE,EAAMG,YAAR,aAAE,EAAYpE,UAHb2B,EADiC,EACjCA,QAASG,EADwB,EACxBA,UAAW9B,EADa,EACbA,MAKtB1B,EAAQ+E,GAAe,SAACY,GAAD,OAAWA,EAAMwF,KAAKnL,SAC7C+F,EAAWC,cAMjB,OAJAI,IAAMgF,WAAU,WACdrF,EHcG,SACL1C,EACAG,EACA9B,GAEA,OAAO,SAACqE,EAAUqD,GAAc,IAAD,EACPA,IAAd+B,EADqB,EACrBA,KADqB,EACfE,IAERpJ,OACHkJ,EAAKnL,MAAMuE,OAAS,GACnB4G,EAAKjE,QAAQ7D,UAAYA,GACzB8H,EAAKjE,QAAQ1D,YAAcA,GAC3B2H,EAAKjE,QAAQxF,QAAUA,IAK3BqE,EAAS4C,EAAgB,kBACzBG,EAAU,uBAAD,OAAwBzF,EAAxB,sBAA6CG,GAAa9B,GAAO8H,MACxE,SAACxJ,GACC+F,EA5CR,SACE/F,EACAkH,GAEA,MAAO,CACLjB,KAAM,YACNiB,UACAlH,SAqCasL,CAAStL,EAAO,CAAEqD,UAASG,YAAW9B,WAC/CqE,EFvCC,CACLE,KAAM,2BEwCJ,SAAChE,GAAD,OAAW8D,EAAS8C,EAAkB5G,SGrC/BsJ,CAAoBlI,EAASG,EAAW9B,MAChD,CAACqE,EAAU1C,EAAS3B,EAAO8B,IAEvB,kBAACmH,GAAD,CAAU3K,MAAOA,ICTX,SAASwL,GAAT,GAAwC,IAApBpJ,EAAmB,EAAnBA,KACjC,OACE,6BAASyC,UAAU,aACjB,4BAAKzC,EAAKhC,OACTgC,EAAKlC,KAAKuL,MAAM,OAAOtI,KAAI,SAACC,EAAGsI,GAAJ,OAC1B,uBAAGZ,IAAG,UAAK1I,EAAKvC,GAAV,YAAgB6L,IAAOtI,OCNtB,SAASuI,KACtB,IAAM5F,EAAWC,cACTjF,EAAW6K,cAAX7K,OACFqB,EAAO2C,GAAe,SAACY,GAC3B,OACEA,EAAMwF,KAAKnL,MAAMkB,MAAK,SAAC2K,GAAD,OAAeA,EAAUhM,KAAOkB,GAAU,SAAU8K,MAAc,QAI5F,IAAK9K,EACH,MAAM,IAAIoD,MAAM,gCAQlB,OALAiC,IAAMgF,WAAU,WACdrF,ELmCG,SACLhF,GAEA,OAAO,SAACgF,EAAUqD,GAAc,IAGxBhH,EAFWgH,IAAT+B,KAEUnL,MAAMkB,MAAK,SAACkC,GAAD,OAAOA,EAAEvD,KAAOkB,KAC7C,GAAIqB,GAAQ,SAAUA,EACpB,OAAOA,EAGT2D,EAAS4C,EAAgB,gBAAD,OAAiB5H,KACzC+H,EAAU,UAAD,OAAW/H,IAAUyI,MAC5B,SAACpH,GACC2D,EArDR,SAAqB3D,GACnB,MAAO,CACL6D,KAAM,gBACNrE,QAAS,CACPQ,SAiDW0J,CAAY1J,IACrB2D,EF7DC,CACLE,KAAM,2BE8DJ,SAAChE,GAAD,OAAW8D,EAAS8C,EAAkB5G,QKpD/B8J,CAAmBhL,IAC5BgF,ECxBG,SAAmBhF,GACxB,MAAO,CACLkF,KAAM,aACNrE,QAAS,CACPb,WDoBOiL,CAAUjL,MAClB,CAACgF,EAAUhF,IAGZqB,GACE,oCACE,kBAAC,IAAD,CAAMyC,UAAU,SAASC,GAAG,KAA5B,QAGA,kBAAC0G,GAAD,CAAUpJ,KAAMA,KE1BT,SAAS6J,GAAT,GAAwD,IAAnChK,EAAkC,EAAlCA,MAAOiK,EAA2B,EAA3BA,QAA2B,EAC1C9F,IAAMC,SAAS,IAD2B,mBAC7DvG,EAD6D,KACtDqM,EADsD,OAEpC/F,IAAMC,SAAS,IAFqB,mBAE7D5D,EAF6D,KAEnD2J,EAFmD,KAIpE,OACE,yBAAKvH,UAAU,aACb,qCACA,0CAEE,2BAAO8B,MAAO7G,EAAO8G,SAAU,SAAAC,GAAC,OAAIsF,EAAStF,EAAEC,cAAcH,WAE/D,kGACA,0CAEE,2BACEV,KAAK,WACLU,MAAOlE,EACPmE,SAAU,SAAAC,GAAC,OAAIuF,EAAYvF,EAAEC,cAAcH,WAG/C,qEACC1E,GAAS,uBAAG4C,UAAU,SAAS5C,GAChC,4BACEsD,QAAS,WACP2G,EAAQpM,EAAO2C,KAFnB,UC7BC,SAAS3C,GAAM4B,EAAenB,EAAgB4E,GACnD,MAAO,CACLc,KAAM,QACNrE,QAAS,CACPF,QACAnB,SACA4E,aCNC,SAASkH,GAAWC,GACzB,MAAO,CACLrG,KAAM,eACNqG,YCgBW,SAASC,KACtB,IAAMD,EAAW7G,cADiB,EAEGwB,EAA2B,cAF9B,mBAE3BuF,EAF2B,YAEjBvK,EAFiB,EAEjBA,MAAOmF,EAFU,EAEVA,QAClBrB,EAAWC,cAgBjB,GAAIoB,EACF,OAAO,kBAACY,EAAD,6BAGT,IAAMK,EAAepG,EAAS,UAAWA,EAAQA,EAAMA,MAAQA,EAAMqG,WAAc,KAEnF,OAAO,kBAAC2D,GAAD,CAAWhK,MAAOoG,EAAc6D,QApBvC,SAAuBpM,EAAe2C,GAAtC,yBAAA+E,EAAAC,OAAA,kEAAAD,EAAA,MACyBgF,EAAO,CAAE1M,QAAO2C,cADzC,mBACU4E,EADV,EACUA,MAVO4B,EAYA5B,IAXE,UAAW4B,EAQ9B,iDAOUvH,EAAgB2F,EAAhB3F,MAAOK,EAASsF,EAATtF,KACfgE,EAAS0G,GAAY/K,EAAOK,EAAKlC,GAAIkC,EAAKhC,OAEpC6F,GAAgB,UAAA0G,EAAS3G,aAAT,eAAgBC,gBAAiB,OACvDG,EAASsG,GAAWzG,IAXtB,kCATF,IAAmBqD,QCTZ,SAASyD,GAAT,GAAgD,IAAhCzE,EAA+B,EAA/BA,SACrB,OAAO,yBAAKpD,UAAU,QAAQoD,GAGzB,SAAS0E,GAAT,GAAmD,IAAhC1E,EAA+B,EAA/BA,SACxB,OAAO,yBAAKpD,UAAU,WAAWoD,GAG5B,SAAS2E,GAAT,GAAgD,IAAhC3E,EAA+B,EAA/BA,SACrB,OAAO,yBAAKpD,UAAU,QAAQoD,G,cCHnB4E,GAAqBC,aAChC,CAJ0B,SAACnH,GAAD,OAAqBA,EAAMoH,YAAYC,aAC5C,SAACrH,GAAD,OAAqBA,EAAMwF,KAAKnL,SAIrD,SAACiN,EAAenK,GAEd,OADAiF,QAAQmF,IAAI,8BACLD,EACJ9J,KAAI,SAACtD,GAAD,OAAQiD,EAAS5B,MAAK,SAACkC,GAAD,OAAOA,EAAEvD,KAAOA,QAC1CmD,QAAO,SAACI,GAAD,YAAaF,IAANE,QAIf+J,GAA4C,CAChDH,YAAa,ICVA,SAASL,KACtB,OACE,oCACE,4CACA,kBAACS,GAAD,OAKN,SAASA,KACP,IAAMC,EAActI,EAAe8H,IAEnC,OACE,oCACGQ,EAAYlK,KAAI,SAACC,GAAD,OACf,6BAAS0H,IAAK1H,EAAEvD,IACd,uBAAGgF,UAAU,QAAQ0D,EAAcnF,EAAE9C,OACrC,kBAAC,IAAD,CAAMwE,GAAI4D,EAAWtF,IACnB,4BAAKA,EAAEhD,OACP,2BAAIgD,EAAE/C,MAAN,gBCxBG,SAASiN,GAAT,GAAgD,IAA5BrF,EAA2B,EAA3BA,SACjC,OACE,kBAACyE,GAAD,KACE,kBAACE,GAAD,KAAO3E,GACP,kBAAC0E,GAAD,KACE,kBAAC,GAAD,QCkDOY,OAlDf,WACE,IAAMnG,EAAUrC,GAAe,SAACY,GAAD,OAAWA,EAAM0F,IAAIjE,WAC9CwB,EAAc7D,GAAe,SAACY,GAAD,OAAWA,EAAM0F,IAAIzC,eAClD3G,EAAQ8C,GAAe,SAACY,GAAD,OAAWA,EAAM0F,IAAIpJ,SAE5CuL,GAAiBpG,IAAYnF,EAEnC,OACE,yBAAK4C,UAAU,OACb,kBAACgB,EAAD,MACCuB,GAAW,kBAACY,EAAD,KAAmBY,GAC9B3G,GAAS,kBAAC,GAAD,CAAOwL,IAAKxL,IACrBuL,GACC,kBAAC,IAAD,KACE,kBAAC,IAAD,CAAOE,OAAK,EAAC3E,KAAK,KAChB,kBAACuE,GAAD,KACE,kBAAC,GAAD,QAGJ,kBAAC,IAAD,CAAOvE,KAAK,iBACV,kBAACuE,GAAD,KACE,kBAAC3B,GAAD,QAIJ,kBAAC,IAAD,CAAO5C,KAAK,QACV,kBAACZ,EAAD,OAGF,kBAAC,IAAD,CAAOY,KAAK,UACV,kBAACwD,GAAD,OAGF,kBAAC,IAAD,KACE,kBAAC3H,EAAD,QAIN,gCACE,6BACE,gEAAsC,MACtC,uBAAG+I,KAAK,kEAAR,sEAcV,SAASxJ,GAAT,GAAqC,IAApBsJ,EAAmB,EAAnBA,IACf,OACE,6BACE,mDACA,2BAAIA,EAAInF,a,uBC5DRsF,GAA2B,CAC/BxG,SAAS,EACTwB,YAAa,KACb3G,MAAO,MCFT,IAAM4L,GAA8B,CAClC7N,MAAO,GACPkH,QAAS,CAAE7D,QAAS,GAAIG,UAAW,K,cCP/BsK,GAAsC,CAC1CnE,OAAQ,OACRW,MAAO,OACPjK,OAAQ,GCJV,IAUe0N,GAVKC,aAAgB,CAClClI,KCAa,WAGZ,IAFDH,EAEA,uDAF0B,KAC1BsI,EACA,uCACA,OAAQA,EAAOhI,MACb,IAAK,QACH,OAAO,eAAKgI,EAAOrM,SACrB,IAAK,SACH,OAAO,KACT,QACE,OAAO+D,IDTX0E,gBDyBa,WAGZ,IAFD3C,EAEA,uDAF4BoG,GAC5BG,EACA,uCACA,OAAOC,aAAQxG,GAAU,SAAC/B,GACxB,OAAQsI,EAAOhI,MACb,IAAK,+BAEH,YADAN,EAAMtF,MAAQ4N,EAAO5N,OAGvB,IAAK,oBACHsF,EAAMgE,OAASsE,EAAOtE,OACtBhE,EAAM2E,MAAQ2D,EAAOzK,eCpC3B2H,KFQa,WAGD,IAFZxF,EAEW,uDAFHkI,GACRI,EACW,uCACX,OAAQA,EAAOhI,MACb,IAAK,YACH,MAAO,CACLjG,MAAOiO,EAAOjO,MACdkH,QAAS+G,EAAO/G,SAEpB,IAAK,gBACH,OAAKvB,EAAM3F,MAAMkB,MAAK,SAACkC,GAAD,OAAOA,EAAEvD,KAAOoO,EAAOrM,QAAQQ,KAAKvC,MAMnD,eACF8F,EADL,CAEE3F,MAAO2F,EAAM3F,MAAMmD,KAAI,SAACgL,GAAD,OACrBA,EAAQtO,KAAOoO,EAAOrM,QAAQQ,KAAKvC,GAAKsO,EAAUF,EAAOrM,QAAQQ,UAR5D,eACFuD,EADL,CAEE3F,MAAM,GAAD,mBAAM2F,EAAM3F,OAAZ,CAAmBiO,EAAOrM,QAAQQ,SAS7C,IAAK,0BACH,OAAO,eACFuD,EADL,CAEE3F,MAAO2F,EAAM3F,MAAMmD,KAAI,SAACgL,GACtB,GAAIA,EAAQtO,KAAOoO,EAAOrM,QAAQb,OAChC,OAAOoN,EAET,IAAI/J,EAAa+J,EAAQhO,QAAQ6C,QAAO,SAACqB,GAAD,OAAOA,IAAM4J,EAAOrM,QAAQrB,UAChE+D,EAAW6J,EAAQ9N,MAQvB,OAPI+D,EAAWG,SAAW4J,EAAQhO,QAAQoE,QACxCH,EAAWI,KAAKyJ,EAAOrM,QAAQrB,QAC/B+D,KAEAA,IAGK,eAAK6J,EAAZ,CAAqB9N,MAAOiE,EAAUnE,QAASiE,SAIrD,IAAK,oBACH,OAAO,eACFuB,EADL,CAEE3F,MAAO2F,EAAM3F,MAAMmD,KAAI,SAACgL,GAAD,OACrBA,EAAQtO,KAAOoO,EAAOrM,QAAQb,OAA9B,eAESoN,EAFT,CAGMhO,QAAS8N,EAAOrM,QAAQzB,QACxBE,MAAO4N,EAAOrM,QAAQvB,QAExB8N,OAIV,QACE,OAAOxI,IEjEX0F,IHOa,WAGZ,IAFD1F,EAEA,uDAFkBiI,GAClBK,EACA,uCACA,OAAQA,EAAOhI,MACb,IAAK,oBACH,MAAO,CACL2C,YAAaqF,EAAOrM,QAAQgH,YAC5BxB,SAAS,EACTnF,MAAO,MAEX,IAAK,sBACH,OAAO,eAAK0D,EAAZ,CAAmByB,SAAS,EAAOnF,MAAO,OAC5C,IAAK,sBACH,OAAO,eACF0D,EADL,CAEEyB,SAAS,EACTnF,MAAOgM,EAAOrM,QAAQK,MAAMqG,aAKlC,OAAO3C,GG5BPoH,YPcK,WAAuF,IAA3DpH,EAA0D,uDAAlDwH,GAAyBc,EAAyB,uCAC3F,OAAQA,EAAOhI,MACb,IAAK,aACH,OAAIN,EAAMqH,YAAYzI,OAAS,GAAKoB,EAAMqH,YAAY,KAAOiB,EAAOrM,QAAQb,OACnE4E,EAEF,CACLqH,YAAa,CAACiB,EAAOrM,QAAQb,QAAQqN,OACnCzI,EAAMqH,YAAYhK,QAAO,SAACqL,GAAD,OAASA,IAAQJ,EAAOrM,QAAQb,YAG/D,QACE,OAAO4E,MS7BP2I,GAAoBC,OAAeC,qCACpCD,OAAeC,qCAAqC,CAAEC,OAAO,IAC9DC,KCEJ,IAAMC,GAAUC,cACVC,GDDS,SAAwBF,GACrC,IAAMG,EAAaC,aAMrB,SAAgCJ,GAU9B,OATqC,SAACE,GAAD,OAAW,SAACG,GAAD,OAAoB,SAACf,GACnE,GAAoB,iBAAhBA,EAAOhI,KAKX,OAAO+I,EAAKf,GAJVU,EAAQnK,KAAKyJ,EAAO3B,aATW2C,CAAuBN,GAAUO,MAC9DC,EAAWb,GAAiBQ,GAElC,OAAOM,aAAYC,GAASF,GCHhBG,CAAeX,IAE7BY,IAASC,OACP,kBAAC,IAAD,CAAUX,MAAOA,IACf,kBAAC,IAAD,CAAQF,QAASA,IACf,kBAAC,GAAD,QAGJc,SAASC,eAAe,W","file":"static/js/main.92e6211b.chunk.js","sourcesContent":["const posts = [\n  [\n    \"P1\",\n    {\n      id: \"P1\",\n      body:\n        \"Lorem ipsum dolor amet microdosing man braid lyft pok pok dreamcatcher hammock tattooed listicle everyday carry banh mi +1 art party. PBR&B keffiyeh freegan irony, +1 unicorn messenger bag quinoa chartreuse banh mi. 8-bit lo-fi hammock, plaid hexagon letterpress paleo sriracha meggings marfa succulents farm-to-table pour-over skateboard. Iceland pabst crucifix, paleo health goth neutra pork belly vaporware keffiyeh tumblr semiotics williamsburg hammock. Pork belly master cleanse pour-over, adaptogen chambray subway tile kitsch shabby chic.\\\\nActually try-hard craft beer direct trade. Copper mug helvetica try-hard synth microdosing selvage before they sold out, tilde bicycle rights. Squid craft beer polaroid tbh truffaut gochujang. Lo-fi meditation crucifix, bicycle rights squid health goth marfa flannel af photo booth four dollar toast master cleanse lyft four loko man braid.\\\\nCliche glossier vexillologist, williamsburg venmo butcher lumbersexual ramps. Cloud bread cardigan dreamcatcher, cold-pressed edison bulb mixtape irony chicharrones. Selvage poke man braid, hot chicken hexagon adaptogen cloud bread wolf twee. Roof party occupy shaman la croix bespoke, brooklyn keffiyeh affogato live-edge fanny pack jianbing authentic tattooed church-key. Adaptogen meditation kinfolk la croix readymade gentrify vape yr cray mumblecore hot chicken vexillologist deep v health goth migas. Tumeric pour-over gentrify, thundercats tousled 90's keffiyeh live-edge VHS waistcoat cold-pressed. Put a bird on it adaptogen pinterest slow-carb unicorn hammock scenester four loko kale chips.\\\\nWayfarers tousled blue bottle man bun cliche chicharrones edison bulb fingerstache live-edge iceland echo park shaman hella woke. Gochujang mumblecore kale chips taxidermy, synth lomo drinking vinegar artisan lyft coloring book thundercats air plant mustache. Beard keytar tumeric truffaut, kombucha try-hard copper mug la croix. Pabst lumbersexual letterpress disrupt. 8-bit live-edge typewriter biodiesel. Salvia mlkshk pabst banh mi, venmo selfies before they sold out try-hard put a bird on it meggings knausgaard PBR&B flexitarian tote bag lyft.\\\\nDirect trade food truck synth put a bird on it 90's, meh glossier hammock shaman cronut paleo gochujang jean shorts. Fashion axe master cleanse schlitz kogi quinoa thundercats occupy. Chia chillwave disrupt mustache meh. Synth messenger bag biodiesel photo booth irony kale chips. Celiac iceland hammock crucifix waistcoat narwhal tacos ethical cardigan man bun chambray pour-over. Intelligentsia normcore gochujang man bun forage pitchfork. Salvia VHS knausgaard hoodie.\\\\nOh. You need a little dummy text for your mockup? How quaint.\\\\nI bet you’re still using Bootstrap too…\",\n      likedBy: [],\n      title: \"Routing Solutions for React\",\n      likes: 27,\n      date: \"2020-01-03T11:07:04.529Z\",\n      userId: \"U1\",\n      published: true,\n    },\n  ],\n  [\n    \"P2\",\n    {\n      id: \"P2\",\n      body:\n        \"Zombie ipsum reversus ab viral inferno, nam rick grimes malum cerebro. De carne lumbering animata corpora quaeritis.\\\\nCum horribilem walking dead resurgere de crazed sepulcris creaturis, zombie sicut de grave feeding iride et serpens. Pestilentia, shaun ofthe dead scythe animated corpses ipsa screams. Pestilentia est plague haec decaying ambulabat mortuos.\\\\nSicut zeder apathetic malus voodoo. Aenean a dolor plan et terror soulless vulnerum contagium accedunt, mortui iam vivam unlife. Qui tardius moveri, brid eof reanimator sed in magna copia sint terribiles undeath legionis. Alii missing oculis aliorum sicut serpere crabs nostram. Putridi braindead odores kill and infect, aere implent left four dead.\\\\nLucio fulci tremor est dark vivos magna. Expansis creepy arm yof darkness ulnis witchcraft missing carnem armis Kirkman Moore and Adlard caeruleum in locis. Romero morbo Congress amarus in auras. Nihil horum sagittis tincidunt, zombie slack-jawed gelida survival portenta.\",\n      likedBy: [],\n      title: \"My Story on JavaScript\",\n      likes: 22,\n      date: \"2020-01-04T17:12:03.529Z\",\n      userId: \"U2\",\n      published: true,\n    },\n  ],\n  [\n    \"P3\",\n    {\n      id: \"P3\",\n      body:\n        \"In sed pariatur incididunt salami pancetta landjaeger dolore meatloaf rump anim aute kevin. Turducken aliquip shoulder labore, enim pig dolore. Shoulder ut proident pig pork loin. Sirloin turkey in meatloaf pork chop, sunt strip steak qui.\\\\nEu ipsum officia ad leberkas sint. Labore spare ribs venison pork belly aute, culpa pork loin ground round nostrud ea qui sirloin prosciutto jowl elit. Ut jowl in cupim beef ribs turducken pig. Swine hamburger porchetta kielbasa commodo ham et sint pork belly rump dolore turducken in consequat fugiat.\\\\nTail sed cillum, esse non elit pork belly pork loin eiusmod. Ut boudin rump, kielbasa aliqua alcatra kevin. Sausage excepteur ut occaecat labore. Drumstick cillum nostrud pork belly. Ground round ullamco pork chuck. Eu nulla pork chop aute andouille kevin duis ut kielbasa.Does your lorem ipsum text long for something a little meatier? Give our generator a try… it’s tasty!\",\n      likedBy: [],\n      title: \"Handling complex state\",\n      likes: 22,\n      date: \"2019-11-30T06:18:22.529Z\",\n      userId: \"U7\",\n    },\n  ],\n  [\n    \"P4\",\n    {\n      id: \"P4\",\n      body:\n        \"Biscuit marzipan tart topping pie apple pie I love. Marzipan I love biscuit bear claw I love liquorice. Chocolate cake soufflé pastry oat cake jelly-o lemon drops ice cream lemon drops candy.\\\\nToffee sweet roll jelly beans I love chocolate sweet tart apple pie icing. Icing powder topping cake. Cupcake soufflé chocolate cake marshmallow muffin dessert sugar plum halvah cake.\\\\nDanish sweet roll chocolate bar pie cheesecake. Bear claw halvah powder candy chocolate cake chocolate bar sugar plum tootsie roll I love. Chocolate tiramisu candy canes cheesecake.\",\n      likedBy: [],\n      title: \"Do's and don'ts with React\",\n      likes: 26,\n      date: \"2020-01-07T04:15:03.529Z\",\n      userId: \"U3\",\n      published: true,\n    },\n  ],\n  [\n    \"P5\",\n    {\n      id: \"P5\",\n      body:\n        \"Gumbo beet greens corn soko endive gumbo gourd. Parsley shallot courgette tatsoi pea sprouts fava bean collard greens dandelion okra wakame tomato. Dandelion cucumber earthnut pea peanut soko zucchini.\\\\nTurnip greens yarrow ricebean rutabaga endive cauliflower sea lettuce kohlrabi amaranth water spinach avocado daikon napa cabbage asparagus winter purslane kale. Celery potato scallion desert raisin horseradish spinach carrot soko. Lotus root water spinach fennel kombu maize bamboo shoot green bean swiss chard seakale pumpkin onion chickpea gram corn pea. Brussels sprout coriander water chestnut gourd swiss chard wakame kohlrabi beetroot carrot watercress. Corn amaranth salsify bunya nuts nori azuki bean chickweed potato bell pepper artichoke.\\\\nNori grape silver beet broccoli kombu beet greens fava bean potato quandong celery. Bunya nuts black-eyed pea prairie turnip leek lentil turnip greens parsnip. Sea lettuce lettuce water chestnut eggplant winter purslane fennel azuki bean earthnut pea sierra leone bologi leek soko chicory celtuce parsley jícama salsify.\\\\nCelery quandong swiss chard chicory earthnut pea potato. Salsify taro catsear garlic gram celery bitterleaf wattle seed collard greens nori. Grape wattle seed kombu beetroot horseradish carrot squash brussels sprout chard.\",\n      likedBy: [],\n      title: \"Something to remember when learning new tech\",\n      likes: 44,\n      date: \"2019-12-09T17:13:04.529Z\",\n      userId: \"U4\",\n      published: true,\n    },\n  ],\n  [\n    \"P6\",\n    {\n      id: \"P6\",\n      body:\n        \"Normally, both your asses would be dead as fucking fried chicken, but you happen to pull this shit while I'm in a transitional period so I don't wanna kill you, I wanna help you. But I can't give you this case, it don't belong to me. Besides, I've already been through too much shit this morning over this case to hand it over to your dumb ass.\\\\nMy money's in that office, right? If she start giving me some bullshit about it ain't there, and we got to go someplace else and get it, I'm gonna shoot you in the head then and there. Then I'm gonna shoot that bitch in the kneecaps, find out where my goddamn money is. She gonna tell me too. Hey, look at me when I'm talking to you, motherfucker. You listen: we go in there, and that nigga Winston or anybody else is in there, you the first motherfucker to get shot. You understand?\\\\nNow that we know who you are, I know who I am. I'm not a mistake! It all makes sense! In a comic, you know how you can tell who the arch-villain's going to be? He's the exact opposite of the hero. And most times they're friends, like you and me! I should've known way back when... You know why, David? Because of the kids. They called me Mr Glass.\",\n      likedBy: [],\n      title: \"Styling your Components\",\n      likes: 23,\n      date: \"2019-12-11T08:43:04.529Z\",\n      userId: \"U5\",\n      published: true,\n    },\n  ],\n  [\n    \"P7\",\n    {\n      id: \"P7\",\n      body:\n        \"Pommy ipsum air one's dirty linen fork out plum pudding the lakes, naff gallivanting around ridicule knows bugger all about nowt. Jolly full English breakast proper alright geezer chaps at the boozer, football bog roll ended up brown bread. Proper knackered collywobbles Geordie I'm off to Bedfordshire wellies, knee high to a grasshopper i'll be a monkey's uncle a tad curtain twitching grub's up jolly hockey sticks, a cracking slappers and meat and two veg.\\\\nNaff off ridiculous golly gosh Bob's your uncle darling it's spitting, ear hole bowler hat getting on my wick plum pudding supper black pudding, get away with ya completely starkers a comely wench fork out.\",\n      likedBy: [],\n      title: \"Keep calm and learn GraphQL!\",\n      likes: 28,\n      date: \"2020-01-10T15:03:04.529Z\",\n      userId: \"U5\",\n    },\n  ],\n  [\n    \"P8\",\n    {\n      id: \"P8\",\n      body:\n        \"Tweeting a baseball.Sit on human they not getting up ever make it to the carpet before i vomit mmmmmm for cats are cute dismember a mouse and then regurgitate parts of it on the family room floor, for rub face on owner yet kitten is playing with dead mouse. Mark territory.\\\\nIf human is on laptop sit on the keyboard. Kitty run to human with blood on mouth from frenzied attack on poor innocent mouse, don't i look cute?\\\\nHide head under blanket so no one can see loved it, hated it, loved it, hated it but curl up and sleep on the freshly laundered towels. Lounge in doorway see owner, run in terror so making sure that fluff gets into the owner's eyes.\\\\nAnd sometimes switches in french and say \\\"miaou\\\" just because well why not i want to go outside let me go outside nevermind inside is better yet jump around on couch, meow constantly until given food, . Love you, then bite you nyan fluffness ahh cucumber!. Purr while eating. Make meme, make cute face spend six hours per day washing, but still have a crusty butthole i am the best yet sitting in a box get suspicious of own shadow then go play with toilette paper check cat door for ambush 10 times before coming in.\\\\nRub butt on table. Lick butt.\",\n      likedBy: [],\n      title: \"Increasing React developer experience\",\n      likes: 37,\n      date: \"2020-04-17T12:07:04.529Z\",\n      userId: \"U1\",\n      published: true,\n    },\n  ],\n  [\n    \"P9\",\n    {\n      id: \"P9\",\n      body:\n        \"Duis autem vel eum iriure dolor in hendrerit in vulputate velit esse molestie consequat, vel illum dolore eu feugiat nulla facilisis at vero eros et accumsan et iusto odio dignissim qui blandit praesent luptatum zzril delenit augue duis dolore te feugait nulla facilisi. Lorem ipsum dolor sit amet, consectetuer adipiscing elit, sed diam nonummy nibh euismod tincidunt ut laoreet dolore magna aliquam erat volutpat.\\\\nUt wisi enim ad minim veniam, quis nostrud exerci tation ullamcorper suscipit lobortis nisl ut aliquip ex ea commodo consequat. Duis autem vel eum iriure dolor in hendrerit in vulputate velit esse molestie consequat, vel illum dolore eu feugiat nulla facilisis at vero eros et accumsan et iusto odio dignissim qui blandit praesent luptatum zzril delenit augue duis dolore te feugait nulla facilisi.\\\\nNam liber tempor cum soluta nobis eleifend option congue nihil imperdiet doming id quod mazim placerat facer possim assum. Lorem ipsum dolor sit amet, consectetuer adipiscing elit, sed diam nonummy nibh euismod tincidunt ut laoreet dolore magna aliquam erat volutpat. Ut wisi enim ad minim veniam, quis nostrud exerci tation ullamcorper suscipit lobortis nisl ut aliquip ex ea commodo consequat.\",\n      likedBy: [],\n      title: \"Using Redux with care\",\n      likes: 21,\n      date: \"2020-04-02T12:07:04.529Z\",\n      userId: \"U2\",\n      published: true,\n    },\n  ],\n  [\n    \"P10\",\n    {\n      id: \"P10\",\n      body:\n        \"Jemand musste Josef K. verleumdet haben, denn ohne dass er etwas Böses getan hätte, wurde er eines Morgens verhaftet. »Wie ein Hund!\\\\nAls Gregor Samsa eines Morgens aus unruhigen Träumen erwachte, fand er sich in seinem Bett zu einem ungeheueren Ungeziefer verwandelt.\\\\nUnd es war ihnen wie eine Bestätigung ihrer neuen Träume und guten Absichten, als am Ziele ihrer Fahrt die Tochter als erste sich erhob und ihren jungen Körper dehnte.\\\\n»Es ist ein eigentümlicher Apparat«, sagte der Offizier zu dem Forschungsreisenden und überblickte mit einem gewissermaßen bewundernden Blick den ihm doch wohlbekannten Apparat.\",\n      likedBy: [],\n      title: \"Understanding State\",\n      likes: 19,\n      date: \"2020-04-18T17:05:04.529Z\",\n      userId: \"U2\",\n      published: true,\n    },\n  ],\n];\nconst users = [\n  { id: \"U1\", login: \"nils\", name: \"Nils Hartmann\" },\n  { id: \"U2\", login: \"susi\", name: \"Susi Mueller\" },\n  { id: \"U3\", login: \"klaus\", name: \"Klaus Schneider\" },\n  { id: \"U4\", login: \"sue\", name: \"Sue Taylor\" },\n  { id: \"U5\", login: \"lauren\", name: \"Lauren Jones\" },\n  { id: \"U6\", login: \"olivia\", name: \"Olivia Smith\" },\n  { id: \"U7\", login: \"cathy\", name: \"Cathy Brown\" },\n  { id: \"U8\", login: \"maja\", name: \"Maja Walsh\" },\n];\n\nexport function getTestData() {\n  return {\n    posts: new Map(posts),\n    users,\n  };\n}\n","import { getTestData } from \"./dummy-data\";\n\n/** User\n *  @typedef {Object} User\n *  @property {string} id - The unique id\n *  @property {string} login - The login\n *  @property {string} name - The fullname of this User\n */\n\n/** BlogPost\n *  @typedef {Object} BlogPost\n *  @property {string} id - The unique id\n *  @property {string} title - The title\n *  @property {string} date - Publication date\n *  @property {string} body - Body\n *  @property {string} userId - Reference to user\n *  @property {number} likes - Likes!\n */\n\nconst { users, posts } = getTestData();\n\n// /** @type {User[]} */\n// const users = readUsers();\n// /** @type {Map<string,BlogPost>} */\n// const posts = readPosts();\n\nexport const orderByDateNewestFirst = (p1, p2) => new Date(p2.date) - new Date(p1.date);\nexport const orderByDateOldestFirst = (p1, p2) => new Date(p1.date) - new Date(p2.date);\n\nexport function getAllPosts(orderByFn = orderByDateNewestFirst, userId) {\n  const allPosts = [...posts.values()].filter((post) => {\n    return post.published || post.userId === userId;\n  });\n\n  allPosts.sort(orderByFn);\n\n  return allPosts;\n}\n\nexport function getPost(postId) {\n  return posts.get(postId);\n}\n\nexport function getAllUsers() {\n  return users;\n}\n\nexport function getUser(userId) {\n  return users.find((u) => u.id === userId);\n}\n\nexport function getUserByLogin(login) {\n  return users.find((u) => u.login === login);\n}\n\nexport function likePost(postId, userId) {\n  const post = posts.get(postId);\n\n  if (!post) {\n    throw new Error(`Cannot find BlogPost '${postId}'`);\n  }\n\n  let newLikedBy = post.likedBy.filter((l) => l !== userId);\n  let newLikes = post.likes;\n  if (userId) {\n    if (newLikedBy.length === post.likedBy.length) {\n      newLikedBy.push(userId);\n      newLikes++;\n    } else {\n      newLikes--;\n    }\n  } else {\n    // anonymous like\n    newLikes++;\n  }\n\n  const updatedPost = {\n    ...post,\n    likes: newLikes,\n    likedBy: newLikedBy,\n  };\n\n  posts.set(postId, updatedPost);\n\n  return updatedPost;\n}\n\nexport function updatePost(postData) {\n  const post = posts.get(postData.id);\n\n  if (!post) {\n    return null;\n  }\n\n  const updatedPost = {\n    ...post,\n    title: postData.title,\n    body: postData.body,\n  };\n\n  posts.set(post.id, updatedPost);\n\n  return updatedPost;\n}\n\nexport function deletePost(postId) {\n  return posts.delete(postId);\n}\n\nexport function insertPost(userId, { title, body }) {\n  const newPost = {\n    userId,\n    title,\n    body,\n    likes: 0,\n    likedBy: [],\n    date: new Date().toISOString(),\n    id: `P${posts.size + 1}`,\n  };\n\n  posts.set(newPost.id, newPost);\n\n  return newPost;\n}\n","import { setupWorker, rest, MockedRequest } from \"msw\";\nimport jwt from \"jsonwebtoken\";\nimport * as datastore from \"./datastore\";\n\n/** IN REAL LIVE YOU WILL NEVER STORE JWT_SECRET IN YOUR CODE! */\nconst JWT_SECRET = \"hurzelpurzel\";\n\nfunction tokenFor(userId: string) {\n  const token = jwt.sign({ userId }, JWT_SECRET, {\n    expiresIn: \"10 years\",\n  });\n\n  return token;\n}\n\nconst timeout = () => (Math.floor(Math.random() * 4) + 2) * 225;\n\nfunction getUserId(req: MockedRequest) {\n  const token = req.headers.get(\"authorization\");\n  if (token) {\n    const payload: any = jwt.verify(token, JWT_SECRET);\n    const user = datastore.getUser(payload.userId);\n    if (!user) {\n      return { error: `User with id '${payload.userId}' not found` };\n    }\n\n    return { userId: user.id };\n  }\n\n  return null;\n}\n\nconst handlers = [\n  rest.post(\"/api/login\", (req, res, ctx) => {\n    const login: any = req.body;\n\n    if (!login) {\n      return res(ctx.status(400), ctx.json({ error: \"login (payload) must be defined\" }));\n    }\n\n    if (!login.login) {\n      return res(ctx.status(400), ctx.json({ error: \"login.login must be defined\" }));\n    }\n\n    if (!login.password) {\n      return res(ctx.status(400), ctx.json({ error: \"login.password must be defined\" }));\n    }\n\n    const user = datastore.getUserByLogin(login.login);\n\n    if (!user) {\n      return res(ctx.status(403), ctx.json({ error: \"Invalid user\" }));\n    }\n\n    return res(\n      ctx.status(200),\n      ctx.json({\n        token: tokenFor(user.id),\n        user,\n      })\n    );\n  }),\n  rest.get(\"/api/posts\", (req, res, ctx) => {\n    const user = getUserId(req);\n    if (user?.error) {\n      return res(ctx.status(401), ctx.json(user));\n    }\n    let result = datastore.getAllPosts(undefined, user?.userId).map((p) => ({\n      ...p,\n      body: undefined,\n    }));\n\n    const orderBy = req.url.searchParams.get(\"orderBy\");\n    const direction = req.url.searchParams.get(\"direction\");\n\n    if (orderBy === \"newestFirst\") {\n      result.sort(datastore.orderByDateNewestFirst);\n    } else if (orderBy === \"oldestFirst\") {\n      result.sort(datastore.orderByDateOldestFirst);\n    } else if (orderBy === \"date\") {\n      if (direction === \"desc\") {\n        result.sort(datastore.orderByDateNewestFirst);\n      } else {\n        result.sort(datastore.orderByDateOldestFirst);\n      }\n    } else if (orderBy === \"likes\") {\n      if (direction === \"desc\") {\n        result.sort((p1, p2) => p1.likes - p2.likes);\n      } else {\n        result.sort((p1, p2) => p2.likes - p1.likes);\n      }\n    } else if (orderBy === \"author\") {\n      result.sort((p1, p2) => {\n        if (!p1.author || !p2.author) {\n          // fallback if author is not requested/found\n          return datastore.orderByDateNewestFirst(p1, p2);\n        }\n\n        const r = p1.author.localeCompare(p2.author);\n        if (r === 0) {\n          return datastore.orderByDateNewestFirst(p1, p2);\n        }\n\n        return r;\n      });\n    }\n\n    return res(ctx.delay(timeout()), ctx.json(result));\n  }),\n  rest.get(\"/api/posts/:id\", (req, res, ctx) => {\n    const post = datastore.getPost(req.params.id);\n\n    if (!post) {\n      return res(ctx.status(404), ctx.json({ error: `Post '${req.params.id}' not found` }));\n    }\n\n    const user = datastore.getUser(post.userId);\n    if (!user) {\n      return res(ctx.status(404), ctx.json({ error: `Iser '${post.userId}' not found` }));\n    }\n\n    return res(ctx.delay(timeout()), ctx.json({ ...post, user }));\n  }),\n\n  rest.post(\"/api/posts\", (req, res, ctx) => {\n    const user = getUserId(req);\n\n    if (!user) {\n      return res(\n        ctx.status(401),\n        ctx.json({ error: \"You must be logged in to execute this action\" })\n      );\n    }\n\n    if (user?.error) {\n      return res(ctx.status(401), ctx.json(user));\n    }\n\n    const post: any = req.body;\n    if (!post) {\n      return res(ctx.status(400), ctx.json({ error: \"Post must be defined\" }));\n    }\n\n    if (!post.title) {\n      return res(ctx.status(400), ctx.json({ error: \"post.title must be defined and not empty\" }));\n    }\n\n    if (!post.body) {\n      return res(ctx.status(400), ctx.json({ error: \"post.body must be defined and not empty\" }));\n    }\n\n    const newPost = datastore.insertPost(user.userId, post);\n\n    return res(ctx.status(201), ctx.json(newPost));\n  }),\n\n  rest.post(\"/api/posts/:id/like\", (req, res, ctx) => {\n    const post = datastore.getPost(req.params.id);\n\n    if (!post) {\n      return res(ctx.status(404), ctx.json({ error: `Post '${req.params.id}' not found` }));\n    }\n\n    if (post.id === \"P9\") {\n      // simluation: error in processing\n      return res(\n        ctx.status(200),\n        ctx.json({\n          postId: post.id,\n          likedBy: post.likedBy,\n          likes: post.likes,\n        })\n      );\n    }\n\n    const user = getUserId(req);\n    if (user?.error) {\n      return res(ctx.status(401), ctx.json(user));\n    }\n\n    const likedPost = datastore.likePost(post.id, user?.userId);\n    return res(\n      ctx.status(200),\n      ctx.json({\n        postId: likedPost.id,\n        likedBy: likedPost.likedBy,\n        likes: likedPost.likes,\n      })\n    );\n  }),\n];\n\nconst worker = setupWorker(...handlers);\nworker.start();\n\n// const worker = setupWorker([\n//   rest.get(\"/api/posts\", (req, res, ctx) => {\n//     let result = datastore.getAllPosts(undefined, userId(req)).map((p) => ({\n//       ...p,\n//       body: undefined,\n//     }));\n//     ctx.delay();\n//     // if (req.query.short !== undefined) {\n//     //   result = result.map((p) => ({\n//     //     id: p.id,\n//     //     date: p.date,\n//     //     title: p.title,\n//     //     published: p.published,\n//     //   }));\n//     // } else if (req.query.full !== undefined) {\n//     //   result = result.map((p) => ({\n//     //     ...p,\n//     //     author: datastore.getUser(p.userId).name,\n//     //   }));\n//     // }\n\n//     const orderBy = req.url.searchParams.get(\"orderBy\");\n//     const direction = req.url.searchParams.get(\"direction\");\n\n//     if (orderBy === \"newestFirst\") {\n//       result.sort(datastore.orderByDateNewestFirst);\n//     } else if (orderBy === \"oldestFirst\") {\n//       result.sort(datastore.orderByDateOldestFirst);\n//     } else if (orderBy === \"date\") {\n//       if (direction === \"desc\") {\n//         result.sort(datastore.orderByDateNewestFirst);\n//       } else {\n//         result.sort(datastore.orderByDateOldestFirst);\n//       }\n//     } else if (orderBy === \"likes\") {\n//       if (direction === \"desc\") {\n//         result.sort((p1, p2) => p1.likes - p2.likes);\n//       } else {\n//         result.sort((p1, p2) => p2.likes - p1.likes);\n//       }\n//     } else if (orderBy === \"author\") {\n//       result.sort((p1, p2) => {\n//         if (!p1.author || !p2.author) {\n//           // fallback if author is not requested/found\n//           return datastore.orderByDateNewestFirst(p1, p2);\n//         }\n\n//         const r = p1.author.localeCompare(p2.author);\n//         if (r === 0) {\n//           return datastore.orderByDateNewestFirst(p1, p2);\n//         }\n\n//         return r;\n//       });\n//     }\n\n//     console.log(\"result >>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>\", result);\n//     return res(ctx.json(result));\n//   })\n// ]);\n","import React from \"react\";\nimport { Link } from \"react-router-dom\";\n\nexport default function NotFoundPage() {\n  return (\n    <div className=\"Container\">\n      <h1>Not Found</h1>\n      <p>The page you requested cannot be found</p>\n      <Link className=\"Button\" to=\"/\">\n        Home\n      </Link>\n    </div>\n  );\n}\n","import { AppState } from \"reducers\";\nimport { useSelector } from \"react-redux\";\n\nexport default function useAppSelector<R>(fn: (state: AppState) => R): R {\n  return useSelector(fn);\n}\n","import React from \"react\";\nimport { useLocation, Link } from \"react-router-dom\";\nimport useAppSelector from \"useAppSelector\";\nimport { useDispatch } from \"react-redux\";\nimport { Dispatch } from \"redux\";\nimport { LogoutAction } from \"auth/authActions\";\n\ntype UserBadgeProps = {\n  username: string;\n  onLogout: () => void;\n};\n\nfunction UserBadge({ username, onLogout }: UserBadgeProps) {\n  return (\n    <span style={{ textAlign: \"right\" }}>\n      Welcome, <b>{username}</b>\n      <br />\n      <button className=\"Link\" onClick={onLogout}>\n        Logout\n      </button>\n    </span>\n  );\n}\n\nfunction LoginButton() {\n  const location = useLocation();\n\n  if (\"/login\" === location.pathname) {\n    return (\n      <Link className=\"Button\" to=\"/\">\n        Home\n      </Link>\n    );\n  }\n\n  return (\n    <Link\n      className=\"Button\"\n      to={{\n        pathname: \"/login\",\n        state: {\n          redirectAfter: \"/\",\n        },\n      }}\n    >\n      Login\n    </Link>\n  );\n}\n\nexport default function AppHeader() {\n  const username = useAppSelector((state) => state.auth?.username);\n  const dispatch = useDispatch<Dispatch<LogoutAction>>();\n\n  function doLogout() {\n    dispatch({\n      type: \"LOGOUT\",\n    });\n  }\n\n  return (\n    <header>\n      <Link to=\"/\">\n        <h1>React Training Blog</h1>\n      </Link>\n      {username ? <UserBadge username={username} onLogout={doLogout} /> : <LoginButton />}\n    </header>\n  );\n}\n","import React from \"react\";\nimport { NewBlogPost } from \"../../types\";\n\ntype PostEditorProps = {\n  onSavePost(post: NewBlogPost): void;\n  error?: string | null | undefined;\n\n  initialTitle?: string;\n  initialBody?: string;\n};\n\nexport default function PostEditor(props: PostEditorProps) {\n  const [title, setTitle] = React.useState(props.initialTitle || \"\");\n  const [body, setBody] = React.useState(props.initialBody || \"\");\n\n  function clear() {\n    setTitle(\"\");\n    setBody(\"\");\n  }\n\n  const saveButtonDisabled = !title || !body;\n\n  return (\n    <div className=\"Container\">\n      <h1>Create Post</h1>\n\n      <label>\n        Title\n        <input value={title} onChange={(e) => setTitle(e.currentTarget.value)} />\n      </label>\n\n      <label>\n        Body\n        <textarea value={body} onChange={(e) => setBody(e.currentTarget.value)} />\n      </label>\n\n      {props.error && <p>{props.error}</p>}\n\n      <button onClick={clear}>Clear</button>\n      <button\n        disabled={saveButtonDisabled}\n        onClick={() => {\n          props.onSavePost({\n            title,\n            body,\n          });\n        }}\n      >\n        Save Post\n      </button>\n    </div>\n  );\n}\n","import React from \"react\";\nimport useAppSelector from \"useAppSelector\";\n\ntype FetchState<T> = {\n  called: boolean;\n  loading: boolean;\n  error?: any;\n  data?: T | null;\n};\n\ntype WriteOptions = {\n  method?: string;\n};\n\nexport default function useWriteApi<T>(\n  url: string,\n  options: WriteOptions = {\n    method: \"POST\",\n  }\n) {\n  const token = useAppSelector((state) => state.auth?.token);\n  const [state, setState] = React.useState<FetchState<T>>({\n    loading: false,\n    data: null,\n    called: false,\n  });\n\n  async function post(payload: any) {\n    let newState: FetchState<T>;\n    try {\n      const headers: HeadersInit = {\n        \"Content-Type\": \"application/json\",\n      };\n      if (token) {\n        headers[\"Authorization\"] = token;\n      }\n\n      setState((oldState) => ({\n        called: oldState.called,\n        loading: true,\n        data: oldState.data,\n      }));\n\n      const res = await fetch(url, {\n        method: options.method || \"POST\",\n        headers,\n        body: JSON.stringify(payload),\n      });\n\n      const json = await res.json();\n\n      if (res.status >= 200 && res.status < 300) {\n        newState = {\n          called: true,\n          loading: false,\n          data: json,\n        };\n      } else {\n        newState = {\n          called: true,\n          loading: false,\n          error: json,\n        };\n      }\n    } catch (error) {\n      console.error(\"Fetch failed\", error);\n      newState = {\n        called: true,\n        loading: false,\n        data: state.data,\n        error: error,\n      };\n    }\n    setState(newState);\n    return newState;\n  }\n\n  return [post, state] as const;\n}\n","import React from \"react\";\n\ntype LoadingIndicatorProps = {\n  children?: React.ReactNode;\n};\n\nexport default function LoadingIndicator({ children }: LoadingIndicatorProps) {\n  return (\n    <div className=\"Container\">\n      <div className=\"Spinner\">\n        {children && <h1>{children}</h1>}\n        <div className=\"bounce bounce1\" />\n        <div className=\"bounce bounce2\" />\n        <div className=\"bounce bounce3\" />\n      </div>\n    </div>\n  );\n}\n","import React from \"react\";\nimport { Redirect, Link } from \"react-router-dom\";\nimport PostEditor from \"./PostEditor\";\nimport useWriteApi from \"../../api/useWriteApi\";\nimport LoadingIndicator from \"LoadingIndicator\";\nimport useAppSelector from \"useAppSelector\";\n\nfunction SuccessConfirmation() {\n  return (\n    <div className=\"Container\">\n      <h1>Your new post have been saved.</h1>\n      <Link className=\"Button\" to=\"/\">\n        Home\n      </Link>\n    </div>\n  );\n}\n\nexport default function PostEditorPage() {\n  const [savePost, { loading, error, called }] = useWriteApi(\"/api/posts\");\n  const isAuthenticated = useAppSelector((state) => state.auth != null);\n\n  if (!isAuthenticated) {\n    return <Redirect to=\"/login\" />;\n  }\n\n  const errorMessage = error ? (\"error\" in error ? error.error : error.toString()) : null;\n\n  if (called && !errorMessage) {\n    return <SuccessConfirmation />;\n  }\n\n  if (loading) {\n    return <LoadingIndicator>Saving....</LoadingIndicator>;\n  }\n\n  return <PostEditor onSavePost={savePost} error={errorMessage} />;\n}\n","import moment from \"moment\";\nexport function formattedDate(date: string) {\n  return moment(date).format(\"DD.MM.YYYY\");\n}\n\ntype LinkablePost = {\n  id: string;\n};\n\nexport function linkToPost(post: LinkablePost) {\n  return `/post/${post.id}`;\n}\n","export function apiRequestStart(description: string) {\n  return {\n    type: \"API_REQUEST_START\",\n    payload: {\n      description,\n    },\n  } as const;\n}\n\nexport type ApiRequestStartAction = ReturnType<typeof apiRequestStart>;\n\nexport function apiRequestSuccess() {\n  return {\n    type: \"API_REQUEST_SUCCESS\",\n  } as const;\n}\n\nexport type ApiRequestSuccessAction = ReturnType<typeof apiRequestSuccess>;\n\nexport function apiRequestFailure(error: string) {\n  return {\n    type: \"API_REQUEST_FAILURE\",\n    payload: {\n      error,\n    },\n  } as const;\n}\n\nexport type ApiRequestFailureAction = ReturnType<typeof apiRequestFailure>;\n\nexport type ApiAction = ApiRequestStartAction | ApiRequestSuccessAction | ApiRequestFailureAction;\n","const BACKEND_URL = \"/api\";\n\nexport async function fetchJson(path: string, token?: string) {\n  const url = `${BACKEND_URL}${path}`;\n\n  const options = token\n    ? {\n        headers: {\n          Authorization: token,\n        },\n      }\n    : undefined;\n\n  const response = await fetch(url, options);\n  if (!response.ok) {\n    throw new Error(`Response from server not OK: ${response.status}`);\n  }\n  return await response.json();\n}\n\ntype HttpMethod = \"get\" | \"post\" | \"put\" | \"patch\" | \"delete\";\n\nexport async function sendJson(method: HttpMethod, path: string, token: string, payload = {}) {\n  const url = `${BACKEND_URL}${path}`;\n\n  const response = await fetch(url, {\n    method: method,\n    body: JSON.stringify(payload),\n    headers: {\n      Accept: \"application/json\",\n      \"Content-Type\": \"application/json\",\n      Authorization: token,\n    },\n  });\n\n  if (!response.ok) {\n    throw new Error(`Response from server not OK: ${response.status}`);\n  }\n\n  return await response.json();\n}\n","import { BlogPost, BlogPostShort } from \"types\";\nimport { ThunkAction } from \"redux-thunk\";\nimport { AppState } from \"reducers\";\nimport { ApiAction, apiRequestStart, apiRequestSuccess, apiRequestFailure } from \"api/apiActions\";\nimport { fetchJson, sendJson } from \"api/fetch-api\";\n\nfunction setPosts(\n  posts: BlogPostShort[],\n  options: { orderBy: string; direction: string; token?: string }\n) {\n  return {\n    type: \"SET_POSTS\",\n    options,\n    posts,\n  } as const;\n}\n\nexport type SetPostsAction = ReturnType<typeof setPosts>;\n\nfunction setFullPost(post: BlogPost) {\n  return {\n    type: \"SET_FULL_POST\",\n    payload: {\n      post,\n    },\n  } as const;\n}\n\nexport type SetFullPostAction = ReturnType<typeof setFullPost>;\n\nexport function loadPostsFromServer(\n  orderBy: string,\n  direction: string,\n  token?: string\n): ThunkAction<void, AppState, void, ApiAction | SetPostsAction> {\n  return (dispatch, getState) => {\n    const { blog, api } = getState();\n    if (\n      api.error ||\n      (blog.posts.length > 0 &&\n        blog.options.orderBy === orderBy &&\n        blog.options.direction === direction &&\n        blog.options.token === token)\n    ) {\n      return;\n    }\n\n    dispatch(apiRequestStart(\"Loading Posts\"));\n    fetchJson(`/posts?full&orderBy=${orderBy}&direction=${direction}`, token).then(\n      (posts) => {\n        dispatch(setPosts(posts, { orderBy, direction, token }));\n        dispatch(apiRequestSuccess());\n      },\n      (error) => dispatch(apiRequestFailure(error))\n    );\n  };\n}\n\nexport function loadPostFromServer(\n  postId: string\n): ThunkAction<void, AppState, void, ApiAction | SetFullPostAction> {\n  return (dispatch, getState) => {\n    const { blog } = getState();\n\n    const post = blog.posts.find((p) => p.id === postId);\n    if (post && \"body\" in post) {\n      return post;\n    }\n\n    dispatch(apiRequestStart(`Loading Post ${postId}`));\n    fetchJson(`/posts/${postId}`).then(\n      (post) => {\n        dispatch(setFullPost(post));\n        dispatch(apiRequestSuccess());\n      },\n      (error) => dispatch(apiRequestFailure(error))\n    );\n  };\n}\n\nfunction updatePostLikes(postId: string, likes: number, likedBy: string[]) {\n  return {\n    type: \"UPDATE_POST_LIKES\",\n    payload: {\n      postId,\n      likes,\n      likedBy,\n    },\n  } as const;\n}\nexport type UpdatePostLikesAction = ReturnType<typeof updatePostLikes>;\n\nfunction togglePostLike(postId: string, userId: string) {\n  return {\n    type: \"TOGGLE_POST_LIKE_ACTION\",\n    payload: {\n      postId,\n      userId,\n    },\n  } as const;\n}\n\nexport type TogglePostLikeAction = ReturnType<typeof togglePostLike>;\n\nexport function toggleLikePost(\n  postId: string\n): ThunkAction<void, AppState, void, UpdatePostLikesAction | TogglePostLikeAction> {\n  return (dispatch, getState) => {\n    const { auth } = getState();\n\n    if (!auth) {\n      return;\n    }\n\n    // Optimistic\n    dispatch(togglePostLike(postId, auth.userId));\n\n    sendJson(\"post\", `/posts/${postId}/like`, auth.token).then(\n      (post) => {\n        dispatch(updatePostLikes(postId, post.likes, post.likedBy));\n      },\n      (error) => console.error(\"Could not update post\", error)\n    );\n  };\n}\n","// ====================================================================\n//  BlogListOptions\n// ====================================================================\nexport function setBlogListSort(sortBy: \"date\" | \"likes\", direction: \"asc\" | \"desc\") {\n  return {\n    type: \"SET_BLOGLIST_SORT\",\n    sortBy,\n    direction,\n  } as const;\n}\nexport type SetBlogListSortAction = ReturnType<typeof setBlogListSort>;\n\nexport function setFilterByLikes(likes: number) {\n  return {\n    type: \"SET_BLOGLIST_FILTER_BY_LIKES\",\n    likes,\n  } as const;\n}\n\nexport type SetFilterByLikesAction = ReturnType<typeof setFilterByLikes>;\n","import React, { Dispatch } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { linkToPost, formattedDate } from \"../../utils\";\nimport useAppSelector from \"useAppSelector\";\nimport { useDispatch } from \"react-redux\";\nimport { toggleLikePost } from \"./../blogActions\";\nimport { BlogPostShort } from \"types\";\nimport { SetBlogListSortAction, setBlogListSort } from \"blog/blogOptionActions\";\n\ntype PostListProps = {\n  posts: Array<BlogPostShort>;\n};\n\ntype BadgeProps = {\n  flavor: \"User\" | \"Unpublished\";\n  children: React.ReactNode;\n};\n\nfunction Badge({ flavor, children }: BadgeProps) {\n  return <div className={`Badge ${flavor}Badge`}>{children}</div>;\n}\n\nfunction UserBadge() {\n  return <Badge flavor=\"User\">Your Post!</Badge>;\n}\n\nfunction DraftBadge() {\n  return <Badge flavor=\"Unpublished\">Unpublished</Badge>;\n}\n\ntype BadgesProps = { children: React.ReactNode };\nfunction Badges({ children }: BadgesProps) {\n  return <div className=\"Badges\">{children}</div>;\n}\n\ntype ListHeaderProps = {\n  isLoggedIn: boolean;\n};\n\ntype SelectableOptionProps = {\n  children: React.ReactNode;\n  active?: boolean;\n  onSelect: () => void;\n};\nfunction SelectableOption({ children, active, onSelect }: SelectableOptionProps) {\n  return (\n    <span className={`SelectableOption${active ? \" active\" : \"\"}`} onClick={onSelect}>\n      {children}\n    </span>\n  );\n}\n\nfunction PostListHeader({ isLoggedIn }: ListHeaderProps) {\n  const dispatch = useDispatch<Dispatch<SetBlogListSortAction>>();\n\n  const { orderBy, direction } = useAppSelector((state) => ({\n    orderBy: state.blogListOptions.sortBy,\n    direction: state.blogListOptions.order,\n  }));\n\n  function updateOrderBy(newOrderBy: \"date\" | \"likes\") {\n    dispatch(setBlogListSort(newOrderBy, direction));\n  }\n  function updateDirection(newDirection: \"asc\" | \"desc\") {\n    dispatch(setBlogListSort(orderBy, newDirection));\n  }\n\n  return (\n    <div className=\"PostListHeader\">\n      <div>\n        {isLoggedIn && (\n          <Link className=\"Button\" to=\"/add\">\n            Add Post\n          </Link>\n        )}\n      </div>\n      <div className=\"PostListOptions\">\n        Order by{\" \"}\n        <SelectableOption active={orderBy === \"date\"} onSelect={() => updateOrderBy(\"date\")}>\n          Date\n        </SelectableOption>{\" \"}\n        |{\" \"}\n        <SelectableOption active={orderBy === \"likes\"} onSelect={() => updateOrderBy(\"likes\")}>\n          Likes\n        </SelectableOption>{\" \"}\n        (\n        <SelectableOption active={direction === \"asc\"} onSelect={() => updateDirection(\"asc\")}>\n          asc\n        </SelectableOption>{\" \"}\n        /{\" \"}\n        <SelectableOption active={direction === \"desc\"} onSelect={() => updateDirection(\"desc\")}>\n          desc\n        </SelectableOption>\n        )\n      </div>\n    </div>\n  );\n}\n\nexport default function PostList({ posts }: PostListProps) {\n  const currentUserId = useAppSelector((state) => state.auth?.userId);\n  const dispatch = useDispatch();\n\n  function likePost(postId: string) {\n    dispatch(toggleLikePost(postId));\n  }\n\n  return (\n    <>\n      <PostListHeader isLoggedIn={!!currentUserId} />\n      {posts.map((p) => (\n        <PostSummary\n          key={p.id}\n          post={p}\n          currentUserId={currentUserId}\n          onLikePost={() => likePost(p.id)}\n        />\n      ))}\n    </>\n  );\n}\n\ntype PostSummaryProps = {\n  currentUserId?: string;\n  post: BlogPostShort;\n  onLikePost(): void;\n};\nfunction PostSummary({ post, currentUserId, onLikePost }: PostSummaryProps) {\n  let likes;\n  if (!currentUserId) {\n    likes = <> ({post.likes} Likes)</>;\n  } else {\n    const likedByMe = post.likedBy.includes(currentUserId);\n    likes = (\n      <button className=\"LikeButton\" onClick={onLikePost}>\n        {post.likes} Likes {likedByMe && <>(including me!)</>}\n      </button>\n    );\n  }\n\n  return (\n    <article className=\"Container\">\n      <p className=\"Date\">{formattedDate(post.date)}</p>\n      <header>\n        <Link key={post.id} to={linkToPost(post)}>\n          <h1>{post.title}</h1>\n        </Link>\n        <Badges>\n          {currentUserId === post.userId && <UserBadge />}\n          {post.published || <DraftBadge />}\n        </Badges>\n      </header>\n      <Link key={post.id} to={linkToPost(post)}>\n        <span>Read more</span>\n      </Link>{\" \"}\n      {likes}\n    </article>\n  );\n}\n","import React from \"react\";\nimport PostList from \"./PostList\";\nimport useAppSelector from \"useAppSelector\";\nimport { useDispatch } from \"react-redux\";\nimport { loadPostsFromServer } from \"blog/blogActions\";\n\nexport default function PostListPageMain() {\n  const { orderBy, direction, token } = useAppSelector((state) => ({\n    orderBy: state.blogListOptions.sortBy,\n    direction: state.blogListOptions.order,\n    token: state.auth?.token,\n  }));\n  const posts = useAppSelector((state) => state.blog.posts);\n  const dispatch = useDispatch();\n\n  React.useEffect(() => {\n    dispatch(loadPostsFromServer(orderBy, direction, token));\n  }, [dispatch, orderBy, token, direction]);\n\n  return <PostList posts={posts} />;\n}\n","import React from \"react\";\n\ntype PostProps = {\n  post: {\n    id: string;\n    title: string;\n    body: string;\n  };\n};\n\nexport default function FullPost({ post }: PostProps) {\n  return (\n    <article className=\"Container\">\n      <h1>{post.title}</h1>\n      {post.body.split(\"\\\\n\").map((p, ix) => (\n        <p key={`${post.id}_${ix}`}>{p}</p>\n      ))}\n    </article>\n  );\n}\n","import React from \"react\";\nimport FullPost from \"./FullPost\";\nimport { useParams, Link } from \"react-router-dom\";\nimport { useDispatch } from \"react-redux\";\nimport { loadPostFromServer } from \"blog/blogActions\";\nimport useAppSelector from \"useAppSelector\";\nimport { BlogPost } from \"types\";\nimport { postShown } from \"blog/viewHistoryActions\";\n\nexport default function PostPage() {\n  const dispatch = useDispatch();\n  const { postId } = useParams();\n  const post = useAppSelector((state) => {\n    return (\n      state.blog.posts.find((candidate) => candidate.id === postId && \"body\" in candidate) || null\n    );\n  }) as BlogPost | null;\n\n  if (!postId) {\n    throw new Error(\"Param PostId must be defined\");\n  }\n\n  React.useEffect(() => {\n    dispatch(loadPostFromServer(postId));\n    dispatch(postShown(postId));\n  }, [dispatch, postId]);\n\n  return (\n    post && (\n      <>\n        <Link className=\"Button\" to=\"/\">\n          Home\n        </Link>\n        <FullPost post={post} />\n      </>\n    )\n  );\n}\n","export function postShown(postId: string) {\n  return {\n    type: \"POST_SHOWN\",\n    payload: {\n      postId,\n    },\n  } as const;\n}\n\nexport type PostShownAction = ReturnType<typeof postShown>;\n","import React from \"react\";\n\ntype LoginFormProps = {\n  error?: string | null | undefined;\n  onLogin(login: string, password: string): void;\n};\n\nexport default function LoginForm({ error, onLogin }: LoginFormProps) {\n  const [login, setLogin] = React.useState(\"\");\n  const [password, setPassword] = React.useState(\"\");\n\n  return (\n    <div className=\"Container\">\n      <h1>Login</h1>\n      <label>\n        Username\n        <input value={login} onChange={e => setLogin(e.currentTarget.value)} />\n      </label>\n      <p>(Valid logins: nils, susi, klaus, sua, lauren, olivia, cathy, maja)</p>\n      <label>\n        Passwort\n        <input\n          type=\"password\"\n          value={password}\n          onChange={e => setPassword(e.currentTarget.value)}\n        />\n      </label>\n      <p>(Use any non-empty string as password)</p>\n      {error && <p className=\"Error\">{error}</p>}\n      <button\n        onClick={() => {\n          onLogin(login, password);\n        }}\n      >\n        Login\n      </button>\n    </div>\n  );\n}\n","export function login(token: string, userId: string, username: string) {\n  return {\n    type: \"LOGIN\",\n    payload: {\n      token,\n      userId,\n      username,\n    },\n  } as const;\n}\nexport type LoginAction = ReturnType<typeof login>;\n\nexport function logout() {\n  return {\n    type: \"LOGOUT\",\n  } as const;\n}\nexport type LogoutAction = ReturnType<typeof logout>;\n","export function navigateTo(location: string) {\n  return {\n    type: \"HISTORY_PUSH\",\n    location,\n  } as const;\n}\n\nexport type NavigateAction = ReturnType<typeof navigateTo>;\n","import React from \"react\";\nimport LoginForm from \"./LoginForm\";\nimport { useLocation } from \"react-router-dom\";\nimport useWriteApi from \"../api/useWriteApi\";\nimport LoadingIndicator from \"LoadingIndicator\";\nimport { useDispatch } from \"react-redux\";\nimport { login as loginAction, LoginAction } from \"./authActions\";\nimport { Dispatch } from \"redux\";\nimport { NavigateAction, navigateTo } from \"navigateActions\";\n\ntype LoginErrorResponse = { error: string };\ntype LoginSuccessResponse = { token: string; user: { id: string; login: string; name: string } };\n\ntype LoginResponse = LoginErrorResponse | LoginSuccessResponse;\n\nfunction isSuccess(response?: any): response is LoginSuccessResponse {\n  return response && \"token\" in response;\n}\n\nexport default function LoginPage() {\n  const location = useLocation();\n  const [mutate, { error, loading }] = useWriteApi<LoginResponse>(\"/api/login\");\n  const dispatch = useDispatch<Dispatch<LoginAction | NavigateAction>>();\n\n  async function doLogin(login: string, password: string) {\n    const { data } = await mutate({ login, password });\n\n    if (!isSuccess(data)) {\n      return;\n    }\n\n    const { token, user } = data;\n    dispatch(loginAction(token, user.id, user.name));\n\n    const redirectAfter = location.state?.redirectAfter || \"/add\";\n    dispatch(navigateTo(redirectAfter));\n  }\n\n  if (loading) {\n    return <LoadingIndicator>Login... Please wait</LoadingIndicator>;\n  }\n\n  const errorMessage = error ? (\"error\" in error ? error.error : error.toString()) : null;\n\n  return <LoginForm error={errorMessage} onLogin={doLogin} />;\n}\n","import React from \"react\";\n\ntype WithChildrenProps = {\n  children?: React.ReactNode;\n};\n\nexport function Page({ children }: WithChildrenProps) {\n  return <div className=\"Page\">{children}</div>;\n}\n\nexport function Sidebar({ children }: WithChildrenProps) {\n  return <div className=\"Sidebar\">{children}</div>;\n}\n\nexport function Main({ children }: WithChildrenProps) {\n  return <div className=\"Main\">{children}</div>;\n}\n","import { createSelector } from \"reselect\";\nimport { PostShownAction } from \"./viewHistoryActions\";\nimport { AppState } from \"reducers\";\nimport { BlogPostShort } from \"types\";\n\nexport type ViewHistoryState = {\n  postsViewed: string[];\n};\n\nconst selectViewedPostIds = (state: AppState) => state.viewHistory.postsViewed;\nconst selectAllPosts = (state: AppState) => state.blog.posts;\n\nexport const selectedViewsPosts = createSelector(\n  [selectViewedPostIds, selectAllPosts],\n  (viewedPostIds, allPosts) => {\n    console.log(\"selectedViewsPosts called!\");\n    return viewedPostIds\n      .map((id) => allPosts.find((p) => p.id === id))\n      .filter((p) => p !== undefined) as BlogPostShort[];\n  }\n);\n\nconst defaultViewHistoryState: ViewHistoryState = {\n  postsViewed: [],\n};\n\nexport function viewHistoryReducer(state = defaultViewHistoryState, action: PostShownAction) {\n  switch (action.type) {\n    case \"POST_SHOWN\":\n      if (state.postsViewed.length > 0 && state.postsViewed[0] === action.payload.postId) {\n        return state;\n      }\n      return {\n        postsViewed: [action.payload.postId].concat(\n          state.postsViewed.filter((pId) => pId !== action.payload.postId)\n        ),\n      };\n    default:\n      return state;\n  }\n}\n","import React from \"react\";\nimport { linkToPost, formattedDate } from \"../../utils\";\nimport { Link } from \"react-router-dom\";\n\nimport useAppSelector from \"useAppSelector\";\nimport { selectedViewsPosts } from \"blog/viewHistoryReducer\";\n\ntype SidebarPost = {\n  id: string;\n  title: string;\n  date: string;\n};\n\nexport default function Sidebar() {\n  return (\n    <>\n      <h1>View History</h1>\n      <SidebarContent />\n    </>\n  );\n}\n\nfunction SidebarContent() {\n  const viewedPosts = useAppSelector(selectedViewsPosts);\n\n  return (\n    <>\n      {viewedPosts.map((p) => (\n        <article key={p.id}>\n          <p className=\"Date\">{formattedDate(p.date)}</p>\n          <Link to={linkToPost(p)}>\n            <h1>{p.title}</h1>\n            <p>{p.likes} Likes</p>\n          </Link>\n        </article>\n      ))}\n    </>\n  );\n}\n","import React from \"react\";\nimport { Page, Main, Sidebar } from \"Layout\";\nimport ViewHistory from \"./sidebar/Sidebar\";\n\ntype BlogPageProps = {\n  children: React.ReactNode;\n};\n\nexport default function BlogPage({ children }: BlogPageProps) {\n  return (\n    <Page>\n      <Main>{children}</Main>\n      <Sidebar>\n        <ViewHistory />\n      </Sidebar>\n    </Page>\n  );\n}\n","import React from \"react\";\nimport { Switch, Route } from \"react-router-dom\";\nimport NotFoundPage from \"./NotFound\";\nimport AppHeader from \"./AppHeader\";\n\nimport PostEditorPage from \"./blog/editor/PostEditorPage\";\nimport PostListPage from \"./blog/postlist/PostListPage\";\nimport PostPage from \"./blog/post/PostPage\";\nimport LoginPage from \"./auth/LoginPage\";\nimport BlogPage from \"blog/BlogPage\";\nimport useAppSelector from \"useAppSelector\";\nimport LoadingIndicator from \"LoadingIndicator\";\n\nfunction App() {\n  const loading = useAppSelector((state) => state.api.loading);\n  const description = useAppSelector((state) => state.api.description);\n  const error = useAppSelector((state) => state.api.error);\n\n  const dataAvailable = !loading && !error;\n\n  return (\n    <div className=\"App\">\n      <AppHeader />\n      {loading && <LoadingIndicator>{description}</LoadingIndicator>}\n      {error && <Error msg={error} />}\n      {dataAvailable && (\n        <Switch>\n          <Route exact path=\"/\">\n            <BlogPage>\n              <PostListPage />\n            </BlogPage>\n          </Route>\n          <Route path=\"/post/:postId\">\n            <BlogPage>\n              <PostPage />\n            </BlogPage>\n          </Route>\n\n          <Route path=\"/add\">\n            <PostEditorPage />\n          </Route>\n\n          <Route path=\"/login\">\n            <LoginPage />\n          </Route>\n\n          <Route>\n            <NotFoundPage />\n          </Route>\n        </Switch>\n      )}\n      <footer>\n        <div>\n          <span>React Example App, Source Code:{\"  \"}</span>\n          <a href=\"https://github.com/nilshartmann/react-statemanagement-examples\">\n            https://github.com/nilshartmann/react-statemanagement-examples\n          </a>\n        </div>\n      </footer>\n    </div>\n  );\n}\n\nexport default App;\n\ntype ErrorProps = {\n  msg: string;\n};\nfunction Error({ msg }: ErrorProps) {\n  return (\n    <div>\n      <h1>API Request Failed!</h1>\n      <p>{msg.toString()}</p>\n    </div>\n  );\n}\n","import {\n  ApiRequestStartAction,\n  ApiRequestFailureAction,\n  ApiRequestSuccessAction,\n} from \"./apiActions\";\n\ntype ApiState = {\n  loading: boolean;\n  description: string | null;\n  error: string | null;\n};\n\nconst intialApiState: ApiState = {\n  loading: false,\n  description: null,\n  error: null,\n};\n\nexport default function apiReducer(\n  state: ApiState = intialApiState,\n  action: ApiRequestStartAction | ApiRequestFailureAction | ApiRequestSuccessAction\n) {\n  switch (action.type) {\n    case \"API_REQUEST_START\":\n      return {\n        description: action.payload.description,\n        loading: true,\n        error: null,\n      };\n    case \"API_REQUEST_SUCCESS\":\n      return { ...state, loading: false, error: null };\n    case \"API_REQUEST_FAILURE\":\n      return {\n        ...state,\n        loading: false,\n        error: action.payload.error.toString(),\n      };\n    default:\n  }\n\n  return state;\n}\n","import { BlogPost, BlogPostShort } from \"types\";\nimport {\n  SetPostsAction,\n  SetFullPostAction,\n  UpdatePostLikesAction,\n  TogglePostLikeAction,\n} from \"./blogActions\";\n\ntype BlogState = {\n  posts: Array<BlogPostShort | BlogPost>;\n  options: { orderBy: string; direction: string; token?: string };\n};\n\nconst defaultBlogState: BlogState = {\n  posts: [],\n  options: { orderBy: \"\", direction: \"\" },\n};\n\nexport default function blogReducer(\n  state = defaultBlogState,\n  action: SetPostsAction | SetFullPostAction | UpdatePostLikesAction | TogglePostLikeAction\n): BlogState {\n  switch (action.type) {\n    case \"SET_POSTS\":\n      return {\n        posts: action.posts,\n        options: action.options,\n      };\n    case \"SET_FULL_POST\":\n      if (!state.posts.find((p) => p.id === action.payload.post.id)) {\n        return {\n          ...state,\n          posts: [...state.posts, action.payload.post],\n        };\n      }\n      return {\n        ...state,\n        posts: state.posts.map((oldPost) =>\n          oldPost.id !== action.payload.post.id ? oldPost : action.payload.post\n        ),\n      };\n    case \"TOGGLE_POST_LIKE_ACTION\": {\n      return {\n        ...state,\n        posts: state.posts.map((oldPost) => {\n          if (oldPost.id !== action.payload.postId) {\n            return oldPost;\n          }\n          let newLikedBy = oldPost.likedBy.filter((l) => l !== action.payload.userId);\n          let newLikes = oldPost.likes;\n          if (newLikedBy.length === oldPost.likedBy.length) {\n            newLikedBy.push(action.payload.userId);\n            newLikes++;\n          } else {\n            newLikes--;\n          }\n\n          return { ...oldPost, likes: newLikes, likedBy: newLikedBy };\n        }),\n      };\n    }\n    case \"UPDATE_POST_LIKES\": {\n      return {\n        ...state,\n        posts: state.posts.map((oldPost) =>\n          oldPost.id === action.payload.postId\n            ? {\n                ...oldPost,\n                likedBy: action.payload.likedBy,\n                likes: action.payload.likes,\n              }\n            : oldPost\n        ),\n      };\n    }\n    default:\n      return state;\n  }\n}\n","import { SetFilterByLikesAction, SetBlogListSortAction } from \"./blogOptionActions\";\nimport produce from \"immer\";\ntype BlogListOptions = {\n  sortBy: \"date\" | \"likes\";\n  order: \"desc\" | \"asc\";\n  likes: number;\n};\n\nconst defaultSortOptions: BlogListOptions = {\n  sortBy: \"date\",\n  order: \"desc\",\n  likes: -1,\n};\n\nexport function blogListOptionsReducer(\n  state: BlogListOptions = defaultSortOptions,\n  action: SetFilterByLikesAction | SetBlogListSortAction\n) {\n  switch (action.type) {\n    case \"SET_BLOGLIST_FILTER_BY_LIKES\": {\n      return { ...state, likes: action.likes };\n    }\n    case \"SET_BLOGLIST_SORT\": {\n      return {\n        ...state,\n        sortBy: action.sortBy,\n        order: action.direction,\n      };\n    }\n    default:\n      return state;\n  }\n}\n\nexport default function blogListOptionsReducerWithImmer(\n  oldState: BlogListOptions = defaultSortOptions,\n  action: SetFilterByLikesAction | SetBlogListSortAction\n) {\n  return produce(oldState, (state) => {\n    switch (action.type) {\n      case \"SET_BLOGLIST_FILTER_BY_LIKES\": {\n        state.likes = action.likes;\n        return;\n      }\n      case \"SET_BLOGLIST_SORT\": {\n        state.sortBy = action.sortBy;\n        state.order = action.direction;\n      }\n    }\n  });\n}\n","import { combineReducers } from \"redux\";\nimport apiReducer from \"./api/apiReducer\";\nimport blogReducer from \"blog/blogReducer\";\nimport { viewHistoryReducer } from \"blog/viewHistoryReducer\";\nimport authReducer from \"auth/authReducer\";\nimport blogListOptionsReducer from \"blog/blogOptionReducer\";\n\nconst rootReducer = combineReducers({\n  auth: authReducer,\n  blogListOptions: blogListOptionsReducer,\n  blog: blogReducer,\n  api: apiReducer,\n  viewHistory: viewHistoryReducer,\n});\n\nexport type AppState = ReturnType<typeof rootReducer>;\n\nexport default rootReducer;\n","import { LoginAction, LogoutAction } from \"./authActions\";\n\ntype AuthState = {\n  token: string;\n  userId: string;\n  username: string;\n};\n\nexport default function authReducer(\n  state: AuthState | null = null,\n  action: LoginAction | LogoutAction\n) {\n  switch (action.type) {\n    case \"LOGIN\":\n      return { ...action.payload };\n    case \"LOGOUT\":\n      return null;\n    default:\n      return state;\n  }\n}\n","import { compose, createStore, applyMiddleware, Middleware, Dispatch } from \"redux\";\nimport thunk from \"redux-thunk\";\n\nimport { History } from \"history\";\n\nimport reducer from \"./reducers\";\nimport { NavigateAction } from \"navigateActions\";\n\n// Redux Dev Tools: http://extension.remotedev.io/#12-advanced-store-setup\nconst composeEnhancers = (window as any).__REDUX_DEVTOOLS_EXTENSION_COMPOSE__\n  ? (window as any).__REDUX_DEVTOOLS_EXTENSION_COMPOSE__({ trace: true })\n  : compose;\n\nexport default function configureStore(history: History) {\n  const middleware = applyMiddleware(createRouterMiddleware(history), thunk);\n  const enhancer = composeEnhancers(middleware);\n\n  return createStore(reducer, enhancer);\n}\n\nfunction createRouterMiddleware(history: History) {\n  const routerMiddleware: Middleware = (store) => (next: Dispatch) => (action: NavigateAction) => {\n    if (action.type === \"HISTORY_PUSH\") {\n      history.push(action.location);\n      return;\n    }\n\n    return next(action);\n  };\n\n  return routerMiddleware;\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\n\nimport { createHashHistory } from \"history\";\nimport { Router } from \"react-router-dom\";\n\nimport \"./backend-mock\";\n\nimport \"./index.css\";\nimport App from \"./App\";\n\nimport configureStore from \"./configureStore\";\nimport { Provider } from \"react-redux\";\nconst history = createHashHistory();\nconst store = configureStore(history);\n\nReactDOM.render(\n  <Provider store={store}>\n    <Router history={history}>\n      <App />\n    </Router>\n  </Provider>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}